(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64871868"],{"2c7d":function(t,e,n){"use strict";n.d(e,"a",(function(){return E})),n.d(e,"b",(function(){return D}));var o,a,i=n("5530"),c=n("ade3"),s=n("4360"),r=n("986e"),d=17,l=91,u=86,m=67,p=88,f=89,h=90,b=71,w=66,v=76,y=85,j=83,k=80,O=68,C=46,g=69,E=[66,67,68,69,71,76,80,83,85,86,88,89,90],x=(o={},Object(c["a"])(o,u,$),Object(c["a"])(o,f,K),Object(c["a"])(o,h,V),Object(c["a"])(o,j,I),Object(c["a"])(o,k,_),Object(c["a"])(o,g,B),o),L=Object(i["a"])(Object(i["a"])({},x),{},Object(c["a"])({},y,q)),M=Object(i["a"])(Object(i["a"])({},x),{},(a={},Object(c["a"])(a,m,S),Object(c["a"])(a,p,H),Object(c["a"])(a,b,P),Object(c["a"])(a,w,A),Object(c["a"])(a,O,R),Object(c["a"])(a,C,R),Object(c["a"])(a,v,J),a)),T=!1;function D(){window.onkeydown=function(t){if(s["a"].state.isInEdiotr){var e=s["a"].state.curComponent,n=t.keyCode;n===d||n===l?T=!0:n==C&&e?(s["a"].commit("deleteComponent"),s["a"].commit("recordSnapshot")):T&&(!M[n]||e&&e.isLock?L[n]&&e&&e.isLock&&(t.preventDefault(),L[n]()):(t.preventDefault(),M[n]()))}},window.onkeyup=function(t){t.keyCode!==d&&t.keyCode!==l||(T=!1)},window.onmousedown=function(){s["a"].commit("setInEditorStatus",!1)}}function S(){s["a"].commit("copy")}function $(){s["a"].commit("paste"),s["a"].commit("recordSnapshot")}function H(){s["a"].commit("cut")}function K(){s["a"].commit("redo")}function V(){s["a"].commit("undo")}function P(){s["a"].state.areaData.components.length&&(s["a"].commit("compose"),s["a"].commit("recordSnapshot"))}function A(){var t=s["a"].state.curComponent;t&&!t.isLock&&"Group"==t.component&&(s["a"].commit("decompose"),s["a"].commit("recordSnapshot"))}function I(){r["a"].$emit("save")}function _(){r["a"].$emit("preview")}function R(){s["a"].state.curComponent&&(s["a"].commit("deleteComponent"),s["a"].commit("recordSnapshot"))}function B(){r["a"].$emit("clearCanvas")}function J(){s["a"].commit("lock")}function q(){s["a"].commit("unlock")}},a8f2:function(t,e,n){},c0ba:function(t,e,n){"use strict";n("a8f2")},d02c:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return"edit"==t.editMode?n("div",{staticClass:"v-text",on:{keydown:t.handleKeydown,keyup:t.handleKeyup}},[n("div",{ref:"text",class:{canEdit:t.canEdit},style:{verticalAlign:t.element.style.verticalAlign},attrs:{contenteditable:t.canEdit,tabindex:t.element.id},domProps:{innerHTML:t._s(t.element.propValue)},on:{dblclick:t.setEdit,paste:t.clearStyle,mousedown:t.handleMousedown,blur:t.handleBlur,input:t.handleInput}})]):n("div",{staticClass:"v-text preview"},[n("div",{style:{verticalAlign:t.element.style.verticalAlign},domProps:{innerHTML:t._s(t.element.propValue)}})])},a=[],i=n("5530"),c=(n("caad"),n("2532"),n("2f62")),s=n("2c7d"),r={props:{propValue:{type:String,require:!0,default:""},element:{type:Object,default:function(){}}},data:function(){return{canEdit:!1,ctrlKey:17,isCtrlDown:!1}},computed:Object(i["a"])({},Object(c["b"])(["editMode"])),methods:{handleInput:function(t){this.$emit("input",this.element,t.target.innerHTML)},handleKeydown:function(t){this.canEdit&&t.stopPropagation(),t.keyCode==this.ctrlKey?this.isCtrlDown=!0:(this.isCtrlDown&&this.canEdit&&s["a"].includes(t.keyCode)||46==t.keyCode)&&t.stopPropagation()},handleKeyup:function(t){this.canEdit&&t.stopPropagation(),t.keyCode==this.ctrlKey&&(this.isCtrlDown=!1)},handleMousedown:function(t){this.canEdit&&t.stopPropagation()},clearStyle:function(t){t.preventDefault();var e=t.clipboardData,n=e.getData("text/plain")||"";""!==n&&document.execCommand("insertText",!1,n),this.$emit("input",this.element,t.target.innerHTML)},handleBlur:function(t){var e=this;this.element.propValue=t.target.innerHTML||"&nbsp;";var n=t.target.innerHTML;""!==n?this.element.propValue=t.target.innerHTML:(this.element.propValue="",this.$nextTick((function(){e.element.propValue="&nbsp;"}))),this.canEdit=!1},setEdit:function(){this.element.isLock||(this.canEdit=!0,this.selectText(this.$refs.text))},selectText:function(t){var e=window.getSelection(),n=document.createRange();n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n)}}},d=r,l=(n("c0ba"),n("2877")),u=Object(l["a"])(d,o,a,!1,null,"07ba8364",null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-64871868.215a0c59.js.map