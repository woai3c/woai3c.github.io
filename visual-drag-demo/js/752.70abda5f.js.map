{"version":3,"file":"js/752.70abda5f.js","mappings":"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","sources":["webpack://visual-drag-demo/./src/custom-component/VTable/Component.vue","webpack://visual-drag-demo/src/custom-component/VTable/Component.vue","webpack://visual-drag-demo/./src/custom-component/VTable/Component.vue?170f","webpack://visual-drag-demo/./src/custom-component/VTable/Component.vue?1014","webpack://visual-drag-demo/./src/custom-component/common/OnEvent.vue","webpack://visual-drag-demo/src/custom-component/common/OnEvent.vue","webpack://visual-drag-demo/./src/custom-component/common/OnEvent.vue?a43b","webpack://visual-drag-demo/./src/utils/request.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('table',{staticClass:\"v-table\"},[_c('tbody',_vm._l((_vm.propValue.data),function(item,index){return _c('tr',{key:index,class:{\n        stripe: _vm.propValue.stripe && index % 2,\n        bold: _vm.propValue.thBold && index === 0,\n      }},_vm._l((item),function(e,i){return _c('td',{key:i},[_vm._v(_vm._s(e))])}),0)}),0)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <table class=\"v-table\">\n    <tbody>\n      <tr\n        v-for=\"(item, index) in propValue.data\"\n        :key=\"index\"\n        :class=\"{\n          stripe: propValue.stripe && index % 2,\n          bold: propValue.thBold && index === 0,\n        }\"\n      >\n        <td v-for=\"(e, i) in item\" :key=\"i\">{{ e }}</td>\n      </tr>\n    </tbody>\n  </table>\n</template>\n\n<script>\nimport request from '@/utils/request'\nimport OnEvent from '../common/OnEvent'\n\nexport default {\n  extends: OnEvent,\n  props: {\n    propValue: {\n      type: Object,\n      default: () => {},\n    },\n    request: {\n      type: Object,\n      default: () => {},\n    },\n    element: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  data() {\n    return {\n      cancelRequest: null,\n    }\n  },\n  created() {\n    if (this.request) {\n      this.cancelRequest = request(this.request, this.propValue, 'data')\n    }\n  },\n  beforeDestroy() {\n    this.request && this.cancelRequest()\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.v-table {\n  border-collapse: collapse;\n  table-layout: fixed;\n  word-break: break-all;\n  word-wrap: break-word;\n\n  td {\n    border: 1px solid #ebeef5;\n    height: 40px;\n    width: 60px;\n    padding: 10px;\n  }\n\n  .bold {\n    font-weight: bold;\n  }\n\n  .stripe {\n    background-color: #fafafa;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Component.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Component.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Component.vue?vue&type=template&id=28f6189e&scoped=true\"\nimport script from \"./Component.vue?vue&type=script&lang=js\"\nexport * from \"./Component.vue?vue&type=script&lang=js\"\nimport style0 from \"./Component.vue?vue&type=style&index=0&id=28f6189e&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"28f6189e\",\n  null\n  \n)\n\nexport default component.exports","var render, staticRenderFns\nimport script from \"./OnEvent.vue?vue&type=script&lang=js\"\nexport * from \"./OnEvent.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport eventBus from '@/utils/eventBus'\n\nexport default {\n  props: {\n    linkage: {\n      type: Object,\n      default: () => {},\n    },\n    element: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  created() {\n    if (this.linkage?.data?.length) {\n      eventBus.$on('v-click', this.onClick)\n      eventBus.$on('v-hover', this.onHover)\n    }\n  },\n  mounted() {\n    const { data, duration } = this.linkage || {}\n    if (data?.length) {\n      this.$el.style.transition = `all ${duration}s`\n    }\n  },\n  beforeDestroy() {\n    if (this.linkage?.data?.length) {\n      eventBus.$off('v-click', this.onClick)\n      eventBus.$off('v-hover', this.onHover)\n    }\n  },\n  methods: {\n    changeStyle(data = []) {\n      data.forEach((item) => {\n        item.style.forEach((e) => {\n          if (e.key) {\n            this.element.style[e.key] = e.value\n          }\n        })\n      })\n    },\n\n    onClick(componentId) {\n      const data = this.linkage.data.filter((item) => item.id === componentId && item.event === 'v-click')\n      this.changeStyle(data)\n    },\n\n    onHover(componentId) {\n      const data = this.linkage.data.filter((item) => item.id === componentId && item.event === 'v-hover')\n      this.changeStyle(data)\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./OnEvent.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./OnEvent.vue?vue&type=script&lang=js\"","import { Message } from 'element-ui'\n\nexport const urlRE = /(https?):\\/\\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/\n\nfunction request(options) {\n  return new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest()\n    xhr.timeout = 6000\n\n    let url = getURL(options.url)\n    if (options.method === 'GET') {\n      url += `${getURLParam(options.data)}`\n    }\n\n    xhr.open(options.method, url)\n\n    xhr.ontimeout = reject\n    xhr.onerror = reject\n    xhr.onload = (e) => {\n      resolve(e.target.response)\n    }\n\n    xhr.send(JSON.stringify(getURLData(options.data, options.paramType)))\n  })\n}\n\nfunction getURLParam(data) {\n  let result = ''\n  data.forEach((item) => {\n    if (item[0]) {\n      result += `&${item[0]}=${item[1]}`\n    }\n  })\n\n  return result ? `?${result}` : ''\n}\n\nfunction getURLData(data, paramType) {\n  if (!data) return ''\n\n  if (paramType === 'array') {\n    return data\n  }\n\n  const result = {}\n  data.forEach((item) => {\n    if (item[0]) {\n      result[item[0]] = item[1]\n    }\n  })\n\n  return result\n}\n\nexport function getURL(url) {\n  return url.startsWith('http') ? url : `https://${url}`\n}\n\n/**\n *\n * @param {object} options 请求的相关参数\n * @param {object} obj 需要修改的数据的父对象\n * @param {string} key 需要修改的数据在父对象中对应的 key\n * @param {string} responseType 需要修改的数据对应的类型\n * @returns {function} 可以取消请求的函数\n */\nexport default function requestWarpper(options, obj, key, responseType = 'object') {\n  let count = 0\n  let timer\n  const url = options?.url\n  if ((url && !/^\\d+$/.test(url)) || urlRE.test(getURL(url))) {\n    if (!options.series) {\n      request(options, responseType)\n        .then((data) => {\n          if (responseType === 'object' || responseType === 'array') {\n            obj[key] = JSON.parse(data)\n          } else {\n            obj[key] = data\n          }\n        })\n        .catch((err) => Message.error(err?.message || err))\n    } else {\n      timer = setInterval(() => {\n        if (options.requestCount != 0 && options.requestCount <= count) {\n          clearInterval(timer)\n          return\n        }\n\n        count++\n        request(options, responseType)\n          .then((data) => {\n            if (responseType === 'object' || responseType === 'array') {\n              obj[key] = JSON.parse(data)\n            } else {\n              obj[key] = data\n            }\n          })\n          .catch((err) => Message.error(err?.message || err))\n      }, options.time)\n    }\n  }\n\n  return function cancelRequest() {\n    clearInterval(timer)\n  }\n}\n"],"names":["render","_vm","this","_c","_self","staticClass","_l","propValue","data","item","index","key","class","stripe","bold","thBold","e","i","_v","_s","staticRenderFns","extends","OnEvent","props","type","Object","default","request","element","cancelRequest","created","beforeDestroy","component","linkage","length","eventBus","$on","onClick","onHover","mounted","duration","$el","style","transition","$off","methods","changeStyle","forEach","value","componentId","filter","id","event","urlRE","options","Promise","resolve","reject","xhr","XMLHttpRequest","timeout","url","getURL","method","getURLParam","open","ontimeout","onerror","onload","target","response","send","JSON","stringify","getURLData","paramType","result","startsWith","requestWarpper","obj","responseType","timer","count","test","series","setInterval","requestCount","clearInterval","then","parse","catch","err","Message","error","message","time"],"sourceRoot":""}