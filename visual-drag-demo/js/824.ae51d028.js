"use strict";(self["webpackChunkvisual_drag_demo"]=self["webpackChunkvisual_drag_demo"]||[]).push([[824],{5443:function(e,t,l){l.d(t,{A:function(){return O}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"v-common-attr",on:{mousedown:function(t){return e.setInitial(e.curComponent.style)}}},[t("el-collapse",{attrs:{accordion:""},on:{change:e.onChange},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-collapse-item",{attrs:{title:"通用样式",name:"style"}},[t("el-form",e._l(e.styleKeys,(function({key:l,label:n},a){return t("el-form-item",{key:a,attrs:{label:n}},[e.isIncludesColor(l)?t("el-color-picker",{attrs:{"show-alpha":""},model:{value:e.curComponent.style[l],callback:function(t){e.$set(e.curComponent.style,l,t)},expression:"curComponent.style[key]"}}):e.selectKey.includes(l)?t("el-select",{model:{value:e.curComponent.style[l],callback:function(t){e.$set(e.curComponent.style,l,t)},expression:"curComponent.style[key]"}},e._l(e.optionMap[l],(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):"fontSize"==l&&"VText"==e.curComponent.component?t("el-input",{attrs:{type:"number"},on:{input:function(t){return e.setFontSize(e.curComponent)}},model:{value:e.curComponent.style[l],callback:function(t){e.$set(e.curComponent.style,l,e._n(t))},expression:"curComponent.style[key]"}}):t("el-input",{attrs:{type:"number"},model:{value:e.curComponent.style[l],callback:function(t){e.$set(e.curComponent.style,l,e._n(t))},expression:"curComponent.style[key]"}})],1)})),1)],1),e.curComponent.request?t("Request"):e._e(),e.curComponent.linkage?t("Linkage"):e._e()],1)],1)},a=[];const o=[{key:"left",label:"x 坐标"},{key:"top",label:"y 坐标"},{key:"rotate",label:"旋转角度"},{key:"width",label:"宽"},{key:"height",label:"高"},{key:"color",label:"颜色"},{key:"backgroundColor",label:"背景色"},{key:"borderWidth",label:"边框宽度"},{key:"borderStyle",label:"边框风格"},{key:"borderColor",label:"边框颜色"},{key:"borderRadius",label:"边框半径"},{key:"fontSize",label:"字体大小"},{key:"fontWeight",label:"字体粗细"},{key:"lineHeight",label:"行高"},{key:"letterSpacing",label:"字间距"},{key:"textAlign",label:"左右对齐"},{key:"verticalAlign",label:"上下对齐"},{key:"opacity",label:"不透明度"}],s={left:"x 坐标",top:"y 坐标",rotate:"旋转角度",width:"宽",height:"高",color:"颜色",backgroundColor:"背景色",borderWidth:"边框宽度",borderStyle:"边框风格",borderColor:"边框颜色",borderRadius:"边框半径",fontSize:"字体大小",fontWeight:"字体粗细",lineHeight:"行高",letterSpacing:"字间距",textAlign:"左右对齐",verticalAlign:"上下对齐",opacity:"不透明度"},r=[{label:"左对齐",value:"left"},{label:"居中",value:"center"},{label:"右对齐",value:"right"}],i=[{label:"实线",value:"solid"},{label:"虚线",value:"dashed"}],u=[{label:"上对齐",value:"top"},{label:"居中对齐",value:"middle"},{label:"下对齐",value:"bottom"}],c=["textAlign","borderStyle","verticalAlign"],p={textAlign:r,borderStyle:i,verticalAlign:u};var d=function(){var e=this,t=e._self._c;return t("el-collapse-item",{staticClass:"request-container",attrs:{title:"数据来源（预览生效）",name:"request"}},[t("el-form",[t("el-form-item",{attrs:{label:"请求地址"}},[t("el-input",{on:{blur:e.validateURL},model:{value:e.request.url,callback:function(t){e.$set(e.request,"url","string"===typeof t?t.trim():t)},expression:"request.url"}},[t("template",{slot:"prepend"},[e._v("HTTPS://")])],2)],1),t("el-form-item",{attrs:{label:"请求方法"}},[t("el-select",{model:{value:e.request.method,callback:function(t){e.$set(e.request,"method",t)},expression:"request.method"}},e._l(e.methodOptions,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",{attrs:{label:"请求参数"}},[t("el-select",{attrs:{placeholder:"参数类型"},on:{change:e.onChnage},model:{value:e.request.paramType,callback:function(t){e.$set(e.request,"paramType",t)},expression:"request.paramType"}},e._l(e.dataOptions,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1),"array"===e.request.paramType?t("div",{staticClass:"param-container"},[t("p",[e._v("数据项")]),e._l(e.request.data,(function(l,n){return t("div",{key:n,staticClass:"div-delete"},[t("el-input",{attrs:{placeholder:"请输入参数值"},model:{value:e.request.data[n],callback:function(t){e.$set(e.request.data,n,t)},expression:"request.data[index]"}}),t("span",{staticClass:"iconfont icon-shanchu",on:{click:function(t){return e.deleteData(n)}}})],1)})),t("el-button",{on:{click:e.addArrayData}},[e._v("添加")])],2):"string"===e.request.paramType||"object"===e.request.paramType?t("div",{staticClass:"param-container"},[t("p",[e._v("数据项")]),e._l(e.request.data,(function(l,n){return t("div",{key:n,staticClass:"param-object-container"},[t("el-input",{attrs:{placeholder:"参数名"},model:{value:l[0],callback:function(t){e.$set(l,0,t)},expression:"item[0]"}}),t("el-input",{attrs:{placeholder:"参数值"},model:{value:l[1],callback:function(t){e.$set(l,1,t)},expression:"item[1]"}}),t("span",{staticClass:"iconfont icon-shanchu",on:{click:function(t){return e.deleteData(n)}}})],1)})),t("el-button",{on:{click:e.addData}},[e._v("添加")])],2):e._e()],1),t("el-form-item",{attrs:{label:"定时触发"}},[t("el-switch",{model:{value:e.request.series,callback:function(t){e.$set(e.request,"series",t)},expression:"request.series"}}),e.request.series?[t("p",[e._v("触发间隔（毫秒）")]),t("el-input",{attrs:{type:"number"},model:{value:e.request.time,callback:function(t){e.$set(e.request,"time",t)},expression:"request.time"}}),t("p",[e._v("触发次数（0 为无限）")]),t("el-input",{attrs:{type:"number"},model:{value:e.request.requestCount,callback:function(t){e.$set(e.request,"requestCount",t)},expression:"request.requestCount"}})]:e._e()],2)],1)],1)},m=[],y=(l(4114),l(7120)),h={data(){return{methodOptions:["GET","POST","PUT","DELETE"],dataOptions:["object","array","string"]}},computed:{request(){return this.$store.state.curComponent.request}},methods:{addArrayData(){this.request.data.push("")},addData(){this.request.data.push(["",""])},deleteData(e){this.request.data.splice(e,1)},onChnage(){"array"===this.request.paramType?this.request.data=[""]:this.request.data=[["",""]]},validateURL(){const e=this.request.url;(e&&/^\d+$/.test(e)||!y.ji.test((0,y.AP)(e)))&&this.$message.error("请输入正确的 URL")}}},v=h,b=l(1656),k=(0,b.A)(v,d,m,!1,null,"5b1a6fc4",null),f=k.exports,C=function(){var e=this,t=e._self._c;return t("el-collapse-item",{staticClass:"linkage-container",attrs:{title:"组件联动（预览生效）",name:"linkage"}},[t("el-form",[e._l(e.linkage.data,(function(l,n){return t("div",{key:n,staticClass:"linkage-component"},[t("div",{staticClass:"div-guanbi",on:{click:function(t){return e.deleteLinkageData(n)}}},[t("span",{staticClass:"iconfont icon-guanbi"})]),t("el-select",{staticClass:"testtest",attrs:{placeholder:"请选择联动组件"},model:{value:l.id,callback:function(t){e.$set(l,"id",t)},expression:"item.id"}},e._l(e.componentData,(function(l,n){return t("el-option",{key:l.id,attrs:{value:l.id,label:l.label}},[t("div",{on:{mouseenter:function(t){return e.onEnter(n)},mouseout:function(t){return e.onOut(n)}}},[e._v(e._s(l.label))])])})),1),t("el-select",{attrs:{placeholder:"请选择监听事件"},model:{value:l.event,callback:function(t){e.$set(l,"event",t)},expression:"item.event"}},e._l(e.eventOptions,(function(e){return t("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1),t("p",[e._v("事件触发时，当前组件要修改的属性")]),e._l(l.style,(function(n,a){return t("div",{key:a,staticClass:"attr-container"},[t("el-select",{on:{change:function(e){n.value=""}},model:{value:n.key,callback:function(t){e.$set(n,"key",t)},expression:"e.key"}},e._l(Object.keys(e.curComponent.style),(function(l){return t("el-option",{key:l,attrs:{value:l,label:e.styleMap[l]}})})),1),e.isIncludesColor(n.key)?t("el-color-picker",{attrs:{"show-alpha":""},model:{value:n.value,callback:function(t){e.$set(n,"value",t)},expression:"e.value"}}):e.selectKey.includes(n.key)?t("el-select",{model:{value:n.value,callback:function(t){e.$set(n,"value",t)},expression:"e.value"}},e._l(e.optionMap[n.key],(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):t("el-input",{attrs:{type:"number",placeholder:"请输入"},model:{value:n.value,callback:function(t){e.$set(n,"value",e._n(t))},expression:"e.value"}}),t("span",{staticClass:"iconfont icon-shanchu",on:{click:function(t){return e.deleteData(l.style,a)}}})],1)})),t("el-button",{on:{click:function(t){return e.addAttr(l.style)}}},[e._v("添加属性")])],2)})),t("el-button",{staticStyle:{"margin-bottom":"10px"},on:{click:e.addComponent}},[e._v("添加组件")]),t("p",[e._v("过渡时间（秒）")]),t("el-input",{staticClass:"input-duration",attrs:{placeholder:"请输入"},model:{value:e.linkage.duration,callback:function(t){e.$set(e.linkage,"duration",t)},expression:"linkage.duration"}})],2)],1)},g=[],q={data(){return{optionMap:p,selectKey:c,styleMap:s,eventOptions:[{label:"点击",value:"v-click"},{label:"悬浮",value:"v-hover"}],oldOpacity:"",oldBackgroundColor:""}},computed:{linkage(){return this.$store.state.curComponent.linkage},componentData(){return this.$store.state.componentData},curComponent(){return this.$store.state.curComponent}},methods:{onEnter(e){this.oldOpacity=this.componentData[e].style.opacity,this.oldBackgroundColor=this.componentData[e].style.backgroundColor,this.componentData[e].style.opacity=".3",this.componentData[e].style.backgroundColor="#409EFF"},onOut(e){this.componentData[e].style.opacity=this.oldOpacity,this.componentData[e].style.backgroundColor=this.oldBackgroundColor},isIncludesColor(e){return e.toLowerCase().includes("color")},addAttr(e){e.push({key:"",value:""})},addComponent(){this.linkage.data.push({id:"",event:"",style:[{key:"",value:""}]})},deleteData(e,t){e.splice(t,1)},deleteLinkageData(e){this.linkage.data.splice(e,1)}}},_=q,x=(0,b.A)(_,C,g,!1,null,"ca0875ce",null),$=x.exports,S={components:{Request:f,Linkage:$},data(){return{optionMap:p,styleData:o,textAlignOptions:r,borderStyleOptions:i,verticalAlignOptions:u,selectKey:c,activeName:""}},computed:{styleKeys(){if(this.curComponent){const e=Object.keys(this.curComponent.style);return this.styleData.filter((t=>e.includes(t.key)))}return[]},curComponent(){return this.$store.state.curComponent}},watch:{curComponent(){this.activeName=this.curComponent.collapseName}},created(){this.activeName=this.curComponent.collapseName},methods:{setInitial(e){this.initialStyle=JSON.parse(JSON.stringify(e))},setFontSize(){const e=this.curComponent.style.fontSize/this.initialStyle.fontSize,t={width:(e*this.initialStyle.width).toFixed(4),height:(e*this.initialStyle.height).toFixed(4),padding:(e*this.initialStyle.padding).toFixed(4)};this.curComponent.style={...this.curComponent.style,...t},this.$store.commit("setShapeStyle",this.curComponent.style),this.$store.commit("recordSnapshot")},onChange(){this.curComponent.collapseName=this.activeName},isIncludesColor(e){return e.toLowerCase().includes("color")}}},A=S,D=(0,b.A)(A,n,a,!1,null,null,null),O=D.exports},7120:function(e,t,l){l.d(t,{AP:function(){return i},Ay:function(){return u},ji:function(){return a}});var n=l(1052);const a=/(https?):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/;function o(e){return new Promise(((t,l)=>{const n=new XMLHttpRequest;n.timeout=6e3;let a=i(e.url);"GET"===e.method&&(a+=`${s(e.data)}`),n.open(e.method,a),n.ontimeout=l,n.onerror=l,n.onload=e=>{t(e.target.response)},n.send(JSON.stringify(r(e.data,e.paramType)))}))}function s(e){let t="";return e.forEach((e=>{e[0]&&(t+=`&${e[0]}=${e[1]}`)})),t?`?${t}`:""}function r(e,t){if(!e)return"";if("array"===t)return e;const l={};return e.forEach((e=>{e[0]&&(l[e[0]]=e[1])})),l}function i(e){return e.startsWith("http")?e:`https://${e}`}function u(e,t,l,s="object"){let r,u=0;const c=e?.url;return(c&&!/^\d+$/.test(c)||a.test(i(c)))&&(e.series?r=setInterval((()=>{0!=e.requestCount&&e.requestCount<=u?clearInterval(r):(u++,o(e,s).then((e=>{t[l]="object"===s||"array"===s?JSON.parse(e):e})).catch((e=>n.Message.error(e?.message||e))))}),e.time):o(e,s).then((e=>{t[l]="object"===s||"array"===s?JSON.parse(e):e})).catch((e=>n.Message.error(e?.message||e)))),function(){clearInterval(r)}}}}]);
//# sourceMappingURL=824.ae51d028.js.map