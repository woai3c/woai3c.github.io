{"version":3,"file":"js/652.1317ef0a.js","mappings":"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","sources":["webpack://visual-drag-demo/./src/custom-component/Picture/Component.vue","webpack://visual-drag-demo/src/custom-component/Picture/Component.vue","webpack://visual-drag-demo/./src/custom-component/Picture/Component.vue?dbfe","webpack://visual-drag-demo/./src/custom-component/Picture/Component.vue?8db5","webpack://visual-drag-demo/./src/custom-component/common/OnEvent.vue","webpack://visual-drag-demo/src/custom-component/common/OnEvent.vue","webpack://visual-drag-demo/./src/custom-component/common/OnEvent.vue?a43b"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticStyle:{\"overflow\":\"hidden\"}},[_c('canvas',{ref:\"canvas\"})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div style=\"overflow: hidden\">\n    <canvas ref=\"canvas\"></canvas>\n  </div>\n</template>\n\n<script>\nimport OnEvent from '../common/OnEvent'\n\nexport default {\n  extends: OnEvent,\n  props: {\n    propValue: {\n      type: Object,\n      required: true,\n      default: () => {},\n    },\n    element: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  data() {\n    return {\n      width: 0,\n      height: 0,\n      img: null,\n      canvas: null,\n      ctx: null,\n      isFirst: true,\n    }\n  },\n  watch: {\n    'element.style.width': function () {\n      this.drawImage()\n    },\n    'element.style.height': function () {\n      this.drawImage()\n    },\n    'propValue.flip.vertical': function () {\n      this.mirrorFlip()\n    },\n    'propValue.flip.horizontal': function () {\n      this.mirrorFlip()\n    },\n  },\n  mounted() {\n    this.canvas = this.$refs.canvas\n    this.ctx = this.canvas.getContext('2d')\n    this.drawImage()\n  },\n  methods: {\n    drawImage() {\n      const { width, height } = this.element.style\n      this.canvas.width = width\n      this.canvas.height = height\n      if (this.isFirst) {\n        this.isFirst = false\n        this.img = document.createElement('img')\n        this.img.src = this.propValue.url\n        this.img.onload = () => {\n          this.ctx.drawImage(this.img, 0, 0, width, height)\n          this.mirrorFlip()\n        }\n      } else {\n        this.mirrorFlip()\n      }\n    },\n\n    mirrorFlip() {\n      const { vertical, horizontal } = this.propValue.flip\n      const { width, height } = this.element.style\n      const hvalue = horizontal ? -1 : 1\n      const vValue = vertical ? -1 : 1\n\n      // 清除图片\n      this.ctx.clearRect(0, 0, width, height)\n      // 平移图片\n      this.ctx.translate(width / 2 - (width * hvalue) / 2, height / 2 - (height * vValue) / 2)\n      // 对称镜像\n      this.ctx.scale(hvalue, vValue)\n      this.ctx.drawImage(this.img, 0, 0, width, height)\n      // 还原坐标点\n      this.ctx.setTransform(1, 0, 0, 1, 0, 0)\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Component.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Component.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Component.vue?vue&type=template&id=16ed21ac\"\nimport script from \"./Component.vue?vue&type=script&lang=js\"\nexport * from \"./Component.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render, staticRenderFns\nimport script from \"./OnEvent.vue?vue&type=script&lang=js\"\nexport * from \"./OnEvent.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport eventBus from '@/utils/eventBus'\n\nexport default {\n  props: {\n    linkage: {\n      type: Object,\n      default: () => {},\n    },\n    element: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  created() {\n    if (this.linkage?.data?.length) {\n      eventBus.$on('v-click', this.onClick)\n      eventBus.$on('v-hover', this.onHover)\n    }\n  },\n  mounted() {\n    const { data, duration } = this.linkage || {}\n    if (data?.length) {\n      this.$el.style.transition = `all ${duration}s`\n    }\n  },\n  beforeDestroy() {\n    if (this.linkage?.data?.length) {\n      eventBus.$off('v-click', this.onClick)\n      eventBus.$off('v-hover', this.onHover)\n    }\n  },\n  methods: {\n    changeStyle(data = []) {\n      data.forEach((item) => {\n        item.style.forEach((e) => {\n          if (e.key) {\n            this.element.style[e.key] = e.value\n          }\n        })\n      })\n    },\n\n    onClick(componentId) {\n      const data = this.linkage.data.filter((item) => item.id === componentId && item.event === 'v-click')\n      this.changeStyle(data)\n    },\n\n    onHover(componentId) {\n      const data = this.linkage.data.filter((item) => item.id === componentId && item.event === 'v-hover')\n      this.changeStyle(data)\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./OnEvent.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./OnEvent.vue?vue&type=script&lang=js\""],"names":["render","_vm","this","_c","_self","staticStyle","ref","staticRenderFns","extends","OnEvent","props","propValue","type","Object","required","default","element","data","width","height","img","canvas","ctx","isFirst","watch","drawImage","mirrorFlip","mounted","$refs","getContext","methods","style","document","createElement","src","url","onload","vertical","horizontal","flip","hvalue","vValue","clearRect","translate","scale","setTransform","component","linkage","created","length","eventBus","$on","onClick","onHover","duration","$el","transition","beforeDestroy","$off","changeStyle","forEach","item","e","key","value","componentId","filter","id","event"],"sourceRoot":""}