(self["webpackChunkvisual_drag_demo"]=self["webpackChunkvisual_drag_demo"]||[]).push([[791],{1791:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return no}});var o=function(){var e=this,t=e._self._c;return t("div",{class:e.isDarkMode?"home dark":"home"},[t("Toolbar"),t("main",[t("section",{class:e.leftList?"left active":"left inactive"},[t("ComponentList"),t("RealTimeComponentList")],1),t("el-button",{staticClass:"btn show-list left-btn",attrs:{title:"show-list-btn",icon:e.leftList?"el-icon-arrow-left":"el-icon-arrow-right"},on:{click:e.isShowLeft}}),t("section",{staticClass:"center",style:e.rightList?"margin-right:288px":"margin-right:10px"},[t("div",{staticClass:"content",on:{drop:e.handleDrop,dragover:e.handleDragOver,mousedown:e.handleMouseDown,mouseup:e.deselectCurComponent}},[t("Editor")],1)]),t("section",{class:e.rightList?"right active":"right inactive"},[e.curComponent?t("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"属性",name:"attr"}},[t(e.curComponent.component+"Attr",{tag:"component"})],1),t("el-tab-pane",{staticStyle:{"padding-top":"20px"},attrs:{label:"动画",name:"animation"}},[t("AnimationList")],1),t("el-tab-pane",{staticStyle:{"padding-top":"20px"},attrs:{label:"事件",name:"events"}},[t("EventList")],1)],1):t("CanvasAttr")],1),t("el-button",{staticClass:"btn show-list right-btn",attrs:{title:"show-list-btn",icon:e.rightList?"el-icon-arrow-right":"el-icon-arrow-left"},on:{click:e.isShowRight}})],1)],1)},i=[],r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"editor",class:{edit:e.isEdit},style:{...e.getCanvasStyle(e.canvasStyleData),width:e.changeStyleWithScale(e.canvasStyleData.width)+"px",height:e.changeStyleWithScale(e.canvasStyleData.height)+"px"},attrs:{id:"editor"},on:{contextmenu:e.handleContextMenu,mousedown:e.handleMouseDown}},[t("Grid",{attrs:{"is-dark-mode":e.isDarkMode}}),e._l(e.componentData,(function(n,o){return t("Shape",{key:n.id,class:{lock:n.isLock},style:e.getShapeStyle(n.style),attrs:{"default-style":n.style,active:n.id===(e.curComponent||{}).id,element:n,index:o}},[n.component.startsWith("SVG")?t(n.component,{tag:"component",staticClass:"component",style:e.getSVGStyle(n.style),attrs:{id:"component"+n.id,"prop-value":n.propValue,element:n,request:n.request}}):"VText"!=n.component?t(n.component,{tag:"component",staticClass:"component",style:e.getComponentStyle(n.style),attrs:{id:"component"+n.id,"prop-value":n.propValue,element:n,request:n.request}}):t(n.component,{tag:"component",staticClass:"component",style:e.getComponentStyle(n.style),attrs:{id:"component"+n.id,"prop-value":n.propValue,element:n,request:n.request},on:{input:e.handleInput}})],1)})),t("ContextMenu"),t("MarkLine"),t("Area",{directives:[{name:"show",rawName:"v-show",value:e.isShowArea,expression:"isShowArea"}],attrs:{start:e.start,width:e.width,height:e.height}}),e.areaData?.components?.length?t("GroupComponentBox",e._b({},"GroupComponentBox",e.areaData.style,!1)):e._e()],2)},s=[],a=(n(4114),n(5353)),c=function(){var e=this,t=e._self._c;return t("div",{staticClass:"shape",class:{active:e.active},on:{click:e.selectCurComponent,mousedown:e.handleMouseDownOnShape}},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.isActive(),expression:"isActive()"}],staticClass:"iconfont icon-xiangyouxuanzhuan",on:{mousedown:e.handleRotate}}),t("span",{directives:[{name:"show",rawName:"v-show",value:e.element.isLock,expression:"element.isLock"}],staticClass:"iconfont icon-suo"}),e._l(e.isActive()?e.getPointList():[],(function(n){return t("div",{key:n,staticClass:"shape-point",style:e.getPointStyle(n),on:{mousedown:function(t){return e.handleMouseDownOnPoint(n,t)}}})})),e._t("default")],2)},l=[],h=n(9459);async function p(e,t=[]){const n=t=>new Promise((n=>{const{animationTime:o,value:i="",isLoop:r}=t;e.style.setProperty("--time",`${o}s`),e.classList.add(i,"animated",u(r));const s=()=>{e.removeEventListener("animationend",s),e.removeEventListener("animationcancel",s),e.classList.remove(i,"animated",u(r)),e.style.removeProperty("--time"),n()};e.addEventListener("animationend",s),e.addEventListener("animationcancel",s)}));for(let o=0,i=t.length;o<i;o++)await n(t[o])}function u(e){return e?"infinite":"no-infinite"}var d=n(5379);const m={lt:f,t:y,rt:g,r:x,rb:v,b:w,lb:b,l:S};function f(e,t,n,o,i){const{symmetricPoint:r}=i;let s=(0,d.EX)(t,r),a=(0,d.WG)(t,s,-e.rotate),c=(0,d.WG)(r,s,-e.rotate),l=c.x-a.x,h=c.y-a.y;if(o){l/h>n?(a.x+=Math.abs(l-h*n),l=h*n):(a.y+=Math.abs(h-l/n),h=l/n);const t=(0,d.WG)(a,s,e.rotate);s=(0,d.EX)(t,r),a=(0,d.WG)(t,s,-e.rotate),c=(0,d.WG)(r,s,-e.rotate),l=c.x-a.x,h=c.y-a.y}l>0&&h>0&&(e.width=Math.round(l),e.height=Math.round(h),e.left=Math.round(a.x),e.top=Math.round(a.y))}function g(e,t,n,o,i){const{symmetricPoint:r}=i;let s=(0,d.EX)(t,r),a=(0,d.WG)(t,s,-e.rotate),c=(0,d.WG)(r,s,-e.rotate),l=a.x-c.x,h=c.y-a.y;if(o){l/h>n?(a.x-=Math.abs(l-h*n),l=h*n):(a.y+=Math.abs(h-l/n),h=l/n);const t=(0,d.WG)(a,s,e.rotate);s=(0,d.EX)(t,r),a=(0,d.WG)(t,s,-e.rotate),c=(0,d.WG)(r,s,-e.rotate),l=a.x-c.x,h=c.y-a.y}l>0&&h>0&&(e.width=Math.round(l),e.height=Math.round(h),e.left=Math.round(c.x),e.top=Math.round(a.y))}function v(e,t,n,o,i){const{symmetricPoint:r}=i;let s=(0,d.EX)(t,r),a=(0,d.WG)(r,s,-e.rotate),c=(0,d.WG)(t,s,-e.rotate),l=c.x-a.x,h=c.y-a.y;if(o){l/h>n?(c.x-=Math.abs(l-h*n),l=h*n):(c.y-=Math.abs(h-l/n),h=l/n);const t=(0,d.WG)(c,s,e.rotate);s=(0,d.EX)(t,r),a=(0,d.WG)(r,s,-e.rotate),c=(0,d.WG)(t,s,-e.rotate),l=c.x-a.x,h=c.y-a.y}l>0&&h>0&&(e.width=Math.round(l),e.height=Math.round(h),e.left=Math.round(a.x),e.top=Math.round(a.y))}function b(e,t,n,o,i){const{symmetricPoint:r}=i;let s=(0,d.EX)(t,r),a=(0,d.WG)(r,s,-e.rotate),c=(0,d.WG)(t,s,-e.rotate),l=a.x-c.x,h=c.y-a.y;if(o){l/h>n?(c.x+=Math.abs(l-h*n),l=h*n):(c.y-=Math.abs(h-l/n),h=l/n);const t=(0,d.WG)(c,s,e.rotate);s=(0,d.EX)(t,r),a=(0,d.WG)(r,s,-e.rotate),c=(0,d.WG)(t,s,-e.rotate),l=a.x-c.x,h=c.y-a.y}l>0&&h>0&&(e.width=Math.round(l),e.height=Math.round(h),e.left=Math.round(c.x),e.top=Math.round(a.y))}function y(e,t,n,o,i){const{symmetricPoint:r,curPoint:s}=i,a=(0,d.WG)(t,s,-e.rotate),c=(0,d.WG)({x:s.x,y:a.y},s,e.rotate),l=Math.sqrt((c.x-r.x)**2+(c.y-r.y)**2),h={x:c.x-(c.x-r.x)/2,y:c.y+(r.y-c.y)/2};let p=e.width;o&&(p=l*n),e.width=p,e.height=Math.round(l),e.top=Math.round(h.y-l/2),e.left=Math.round(h.x-e.width/2)}function x(e,t,n,o,i){const{symmetricPoint:r,curPoint:s}=i,a=(0,d.WG)(t,s,-e.rotate),c=(0,d.WG)({x:a.x,y:s.y},s,e.rotate),l=Math.sqrt((c.x-r.x)**2+(c.y-r.y)**2),h={x:c.x-(c.x-r.x)/2,y:c.y+(r.y-c.y)/2};let p=e.height;o&&(p=l/n),e.height=p,e.width=Math.round(l),e.top=Math.round(h.y-e.height/2),e.left=Math.round(h.x-l/2)}function w(e,t,n,o,i){const{symmetricPoint:r,curPoint:s}=i,a=(0,d.WG)(t,s,-e.rotate),c=(0,d.WG)({x:s.x,y:a.y},s,e.rotate),l=Math.sqrt((c.x-r.x)**2+(c.y-r.y)**2),h={x:c.x-(c.x-r.x)/2,y:c.y+(r.y-c.y)/2};let p=e.width;o&&(p=l*n),e.width=p,e.height=Math.round(l),e.top=Math.round(h.y-l/2),e.left=Math.round(h.x-e.width/2)}function S(e,t,n,o,i){const{symmetricPoint:r,curPoint:s}=i,a=(0,d.WG)(t,s,-e.rotate),c=(0,d.WG)({x:a.x,y:s.y},s,e.rotate),l=Math.sqrt((c.x-r.x)**2+(c.y-r.y)**2),h={x:c.x-(c.x-r.x)/2,y:c.y+(r.y-c.y)/2};let p=e.height;o&&(p=l/n),e.height=p,e.width=Math.round(l),e.top=Math.round(h.y-e.height/2),e.left=Math.round(h.x-l/2)}function C(e,t,n,o,i,r){m[e](t,n,o,i,r)}var k=n(2112),_={props:{active:{type:Boolean,default:!1},element:{required:!0,type:Object,default:()=>{}},defaultStyle:{required:!0,type:Object,default:()=>{}},index:{required:!0,type:[Number,String],default:0}},data(){return{pointList:["lt","t","rt","r","rb","b","lb","l"],pointList2:["r","l"],initialAngle:{lt:0,t:45,rt:90,r:135,rb:180,b:225,lb:270,l:315},angleToCursor:[{start:338,end:23,cursor:"nw"},{start:23,end:68,cursor:"n"},{start:68,end:113,cursor:"ne"},{start:113,end:158,cursor:"e"},{start:158,end:203,cursor:"se"},{start:203,end:248,cursor:"s"},{start:248,end:293,cursor:"sw"},{start:293,end:338,cursor:"w"}],cursors:{}}},computed:(0,a.aH)(["curComponent","editor","showRight"]),mounted(){this.curComponent&&(this.cursors=this.getCursor()),h.A.$on("runAnimation",(()=>{this.element==this.curComponent&&p(this.$el,this.curComponent.animations)})),h.A.$on("stopAnimation",(()=>{this.$el.classList.remove("animated","infinite")}))},methods:{getPointList(){return"line-shape"===this.element.component?this.pointList2:this.pointList},isActive(){return this.active&&!this.element.isLock},handleRotate(e){this.$store.commit("setClickComponentStatus",!0),e.preventDefault(),e.stopPropagation();const t={...this.defaultStyle},n=e.clientY,o=e.clientX,i=t.rotate,r=this.$el.getBoundingClientRect(),s=r.left+r.width/2,a=r.top+r.height/2,c=Math.atan2(n-a,o-s)/(Math.PI/180);let l=!1;const h=e=>{l=!0;const n=e.clientX,o=e.clientY,r=Math.atan2(o-a,n-s)/(Math.PI/180);t.rotate=i+r-c,this.$store.commit("setShapeStyle",t)},p=()=>{l&&this.$store.commit("recordSnapshot"),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",p),this.cursors=this.getCursor()};document.addEventListener("mousemove",h),document.addEventListener("mouseup",p)},getPointStyle(e){const{width:t,height:n}=this.defaultStyle,o=/t/.test(e),i=/b/.test(e),r=/l/.test(e),s=/r/.test(e);let a=0,c=0;2===e.length?(a=r?0:t,c=o?0:n):((o||i)&&(a=t/2,c=o?0:n),(r||s)&&(a=r?0:t,c=Math.floor(n/2)));const l={marginLeft:"-4px",marginTop:"-4px",left:`${a}px`,top:`${c}px`,cursor:this.cursors[e]};return l},getCursor(){const{angleToCursor:e,initialAngle:t,pointList:n,curComponent:o}=this,i=(0,d.WR)(o.style.rotate),r={};let s=-1;return n.forEach((n=>{const o=(0,d.WR)(t[n]+i),a=e.length;while(1){s=(s+1)%a;const t=e[s];if(o<23||o>=338)return void(r[n]="nw-resize");if(t.start<=o&&o<t.end)return void(r[n]=`${t.cursor}-resize`)}})),r},handleMouseDownOnShape(e){if(this.$nextTick((()=>h.A.$emit("componentClick"))),this.$store.commit("setInEditorStatus",!0),this.$store.commit("setClickComponentStatus",!0),(0,k.uy)(this.element.component)&&e.preventDefault(),e.stopPropagation(),this.$store.commit("setCurComponent",{component:this.element,index:this.index}),this.element.isLock)return;this.cursors=this.getCursor();const t={...this.defaultStyle},n=e.clientY,o=e.clientX,i=Number(t.top),r=Number(t.left);let s=!1;const a=e=>{s=!0;const a=e.clientX,c=e.clientY;t.top=c-n+i,t.left=a-o+r,this.$store.commit("setShapeStyle",t),this.$nextTick((()=>{h.A.$emit("move",c-n>0,a-o>0)}))},c=()=>{s&&this.$store.commit("recordSnapshot"),h.A.$emit("unmove"),document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",c)};document.addEventListener("mousemove",a),document.addEventListener("mouseup",c)},selectCurComponent(e){e.stopPropagation(),e.preventDefault(),this.$store.commit("hideContextMenu"),this.$store.state.rightList||this.$store.commit("isShowRightList")},handleMouseDownOnPoint(e,t){this.$store.commit("setInEditorStatus",!0),this.$store.commit("setClickComponentStatus",!0),t.stopPropagation(),t.preventDefault();const n={...this.defaultStyle},o=n.width/n.height,i={x:n.left+n.width/2,y:n.top+n.height/2},r=this.editor.getBoundingClientRect(),s=t.target.getBoundingClientRect(),a={x:Math.round(s.left-r.left+t.target.offsetWidth/2),y:Math.round(s.top-r.top+t.target.offsetHeight/2)},c={x:i.x-(a.x-i.x),y:i.y-(a.y-i.y)};let l=!1,h=!0;const p=this.isNeedLockProportion(),u=t=>{if(h)return void(h=!1);l=!0;const s={x:t.clientX-Math.round(r.left),y:t.clientY-Math.round(r.top)};C(e,n,s,o,p,{center:i,curPoint:a,symmetricPoint:c}),this.$store.commit("setShapeStyle",n)},d=()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",d),l&&this.$store.commit("recordSnapshot")};document.addEventListener("mousemove",u),document.addEventListener("mouseup",d)},isNeedLockProportion(){if("Group"!=this.element.component)return!1;const e=[0,90,180,360];for(const t of this.element.propValue)if(!e.includes((0,d.WR)(parseInt(t.style.rotate))))return!0;return!1}}},A=_,$=n(1656),E=(0,$.A)(A,c,l,!1,null,"26a98a9f",null),T=E.exports,L=n(1736),R=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.menuShow,expression:"menuShow"}],staticClass:"contextmenu",style:{top:e.menuTop+"px",left:e.menuLeft+"px"}},[t("ul",{on:{mouseup:e.handleMouseUp}},[e.curComponent?[e.curComponent.isLock?t("li",{on:{click:e.unlock}},[e._v("解锁")]):[t("li",{on:{click:e.copy}},[e._v("复制")]),t("li",{on:{click:e.paste}},[e._v("粘贴")]),t("li",{on:{click:e.cut}},[e._v("剪切")]),t("li",{on:{click:e.deleteComponent}},[e._v("删除")]),t("li",{on:{click:e.lock}},[e._v("锁定")]),t("li",{on:{click:e.topComponent}},[e._v("置顶")]),t("li",{on:{click:e.bottomComponent}},[e._v("置底")]),t("li",{on:{click:e.upComponent}},[e._v("上移")]),t("li",{on:{click:e.downComponent}},[e._v("下移")])]]:t("li",{on:{click:e.paste}},[e._v("粘贴")])],2)])},M=[],O={data(){return{copyData:null}},computed:(0,a.aH)(["menuTop","menuLeft","menuShow","curComponent"]),methods:{lock(){this.$store.commit("lock")},unlock(){this.$store.commit("unlock")},handleMouseUp(){this.$store.commit("setClickComponentStatus",!0)},cut(){this.$store.commit("cut")},copy(){this.$store.commit("copy")},paste(){this.$store.commit("paste",!0),this.$store.commit("recordSnapshot")},deleteComponent(){this.$store.commit("deleteComponent"),this.$store.commit("recordSnapshot")},upComponent(){this.$store.commit("upComponent"),this.$store.commit("recordSnapshot")},downComponent(){this.$store.commit("downComponent"),this.$store.commit("recordSnapshot")},topComponent(){this.$store.commit("topComponent"),this.$store.commit("recordSnapshot")},bottomComponent(){this.$store.commit("bottomComponent"),this.$store.commit("recordSnapshot")}}},D=O,N=(0,$.A)(D,R,M,!1,null,"503f5c08",null),I=N.exports,P=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mark-line"},e._l(e.lines,(function(n){return t("div",{directives:[{name:"show",rawName:"v-show",value:e.lineStatus[n]||!1,expression:"lineStatus[line] || false"}],key:n,ref:n,refInFor:!0,staticClass:"line",class:n.includes("x")?"xline":"yline"})})),0)},H=[],B={data(){return{lines:["xt","xc","xb","yl","yc","yr"],diff:3,lineStatus:{xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1}}},computed:(0,a.aH)(["curComponent","componentData"]),mounted(){h.A.$on("move",((e,t)=>{this.showLine(e,t)})),h.A.$on("unmove",(()=>{this.hideLine()}))},methods:{hideLine(){Object.keys(this.lineStatus).forEach((e=>{this.lineStatus[e]=!1}))},showLine(e,t){const n=this.$refs,o=this.componentData,i=(0,L.qG)(this.curComponent.style),r=i.width/2,s=i.height/2;this.hideLine(),o.forEach((o=>{if(o==this.curComponent)return;const a=(0,L.qG)(o.style),{top:c,left:l,bottom:h,right:p}=a,u=a.width/2,d=a.height/2,m={top:[{isNearly:this.isNearly(i.top,c),lineNode:n.xt[0],line:"xt",dragShift:c,lineShift:c},{isNearly:this.isNearly(i.bottom,c),lineNode:n.xt[0],line:"xt",dragShift:c-i.height,lineShift:c},{isNearly:this.isNearly(i.top+s,c+d),lineNode:n.xc[0],line:"xc",dragShift:c+d-s,lineShift:c+d},{isNearly:this.isNearly(i.top,h),lineNode:n.xb[0],line:"xb",dragShift:h,lineShift:h},{isNearly:this.isNearly(i.bottom,h),lineNode:n.xb[0],line:"xb",dragShift:h-i.height,lineShift:h}],left:[{isNearly:this.isNearly(i.left,l),lineNode:n.yl[0],line:"yl",dragShift:l,lineShift:l},{isNearly:this.isNearly(i.right,l),lineNode:n.yl[0],line:"yl",dragShift:l-i.width,lineShift:l},{isNearly:this.isNearly(i.left+r,l+u),lineNode:n.yc[0],line:"yc",dragShift:l+u-r,lineShift:l+u},{isNearly:this.isNearly(i.left,p),lineNode:n.yr[0],line:"yr",dragShift:p,lineShift:p},{isNearly:this.isNearly(i.right,p),lineNode:n.yr[0],line:"yr",dragShift:p-i.width,lineShift:p}]},f=[],{rotate:g}=this.curComponent.style;Object.keys(m).forEach((e=>{m[e].forEach((t=>{t.isNearly&&(this.$store.commit("setShapeSingleStyle",{key:e,value:0!=g?this.translatecurComponentShift(e,t,i):t.dragShift}),t.lineNode.style[e]=`${t.lineShift}px`,f.push(t.line))}))})),f.length&&this.chooseTheTureLine(f,e,t)}))},translatecurComponentShift(e,t,n){const{width:o,height:i}=this.curComponent.style;return"top"==e?Math.round(t.dragShift-(i-n.height)/2):Math.round(t.dragShift-(o-n.width)/2)},chooseTheTureLine(e,t,n){n?e.includes("yr")?this.lineStatus.yr=!0:e.includes("yc")?this.lineStatus.yc=!0:e.includes("yl")&&(this.lineStatus.yl=!0):e.includes("yl")?this.lineStatus.yl=!0:e.includes("yc")?this.lineStatus.yc=!0:e.includes("yr")&&(this.lineStatus.yr=!0),t?e.includes("xb")?this.lineStatus.xb=!0:e.includes("xc")?this.lineStatus.xc=!0:e.includes("xt")&&(this.lineStatus.xt=!0):e.includes("xt")?this.lineStatus.xt=!0:e.includes("xc")?this.lineStatus.xc=!0:e.includes("xb")&&(this.lineStatus.xb=!0)},isNearly(e,t){return Math.abs(e-t)<=this.diff}}},W=B,F=(0,$.A)(W,P,H,!1,null,"561cc54e",null),U=F.exports,z=function(){var e=this,t=e._self._c;return t("div",{staticClass:"area",style:{left:e.start.x+"px",top:e.start.y+"px",width:e.width+"px",height:e.height+"px"}})},V=[],G={props:{start:{type:Object,default:()=>{}},width:{type:Number,default:0},height:{type:Number,default:0}}},j=G,q=(0,$.A)(j,z,V,!1,null,"2c84e34b",null),X=q.exports,Y=function(){var e=this,t=e._self._c;return t("div",{staticClass:"area",style:{left:e.left+"px",top:e.top+"px",width:e.width+"px",height:e.height+"px"}})},K=[],J={props:{width:{type:Number,default:0},height:{type:Number,default:0},left:{type:Number,default:0},top:{type:Number,default:0}}},Q=J,Z=(0,$.A)(Q,Y,K,!1,null,"7597c49a",null),ee=Z.exports,te=function(){var e=this,t=e._self._c;return t("svg",{staticClass:"grid",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"}},[t("defs",[t("pattern",{attrs:{id:"smallGrid",width:"7.236328125",height:"7.236328125",patternUnits:"userSpaceOnUse"}},[t("path",{attrs:{d:"M 7.236328125 0 L 0 0 0 7.236328125",fill:"none",stroke:e.isDarkMode?"rgba(207, 207, 207, 0.5)":"rgba(207, 207, 207, 0.3)","stroke-width":"1"}})]),t("pattern",{attrs:{id:"grid",width:"36.181640625",height:"36.181640625",patternUnits:"userSpaceOnUse"}},[t("rect",{attrs:{width:"36.181640625",height:"36.181640625",fill:"url(#smallGrid)"}}),t("path",{attrs:{d:"M 36.181640625 0 L 0 0 0 36.181640625",fill:"none",stroke:e.isDarkMode?"rgba(186, 186, 186)":"rgba(186, 186, 186, 0.5)","stroke-width":"1"}})])]),t("rect",{attrs:{width:"100%",height:"100%",fill:"url(#grid)"}})])},ne=[],oe={props:{isDarkMode:Boolean}},ie=oe,re=(0,$.A)(ie,te,ne,!1,null,"60c04a22",null),se=re.exports,ae={components:{Shape:T,ContextMenu:I,MarkLine:U,Area:X,Grid:se,GroupComponentBox:ee},props:{isEdit:{type:Boolean,default:!0}},data(){return{editorX:0,editorY:0,start:{x:0,y:0},width:0,height:0,isShowArea:!1,svgFilterAttrs:["width","height","top","left","rotate"]}},computed:(0,a.aH)(["componentData","curComponent","canvasStyleData","editor","isDarkMode","areaData"]),mounted(){this.$store.commit("getEditor"),h.A.$on("hideArea",(()=>{this.hideArea()}))},methods:{getShapeStyle:L.X9,getCanvasStyle:L.O_,changeStyleWithScale:d.Gq,handleMouseDown(e){this.curComponent&&!(0,k.uy)(this.curComponent.component)||e.preventDefault(),this.hideArea();const t=this.editor.getBoundingClientRect();this.editorX=t.x,this.editorY=t.y;const n=e.clientX,o=e.clientY;this.start.x=n-this.editorX,this.start.y=o-this.editorY,this.isShowArea=!0;const i=e=>{this.width=Math.abs(e.clientX-n),this.height=Math.abs(e.clientY-o),e.clientX<n&&(this.start.x=e.clientX-this.editorX),e.clientY<o&&(this.start.y=e.clientY-this.editorY)},r=e=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",r),e.clientX!=n||e.clientY!=o?this.createGroup():this.hideArea()};document.addEventListener("mousemove",i),document.addEventListener("mouseup",r)},hideArea(){this.isShowArea=!1,this.width=0,this.height=0,this.$store.commit("setAreaData",{style:{left:0,top:0,width:0,height:0},components:[]})},createGroup(){const e=this.getSelectArea();if(e.length<=1)return void this.hideArea();let t=1/0,n=1/0,o=-1/0,i=-1/0;e.forEach((e=>{let r={};"Group"==e.component?e.propValue.forEach((e=>{const s=(0,k.$)(`#component${e.id}`).getBoundingClientRect();r.left=s.left-this.editorX,r.top=s.top-this.editorY,r.right=s.right-this.editorX,r.bottom=s.bottom-this.editorY,r.left<n&&(n=r.left),r.top<t&&(t=r.top),r.right>o&&(o=r.right),r.bottom>i&&(i=r.bottom)})):r=(0,L.qG)(e.style),r.left<n&&(n=r.left),r.top<t&&(t=r.top),r.right>o&&(o=r.right),r.bottom>i&&(i=r.bottom)})),this.start.x=n,this.start.y=t,this.width=o-n,this.height=i-t,this.$store.commit("setAreaData",{style:{left:n,top:t,width:this.width,height:this.height},components:e}),this.isShowArea=!1},getSelectArea(){const e=[],{x:t,y:n}=this.start;return this.componentData.forEach((o=>{if(o.isLock)return;const{left:i,top:r,width:s,height:a}=(0,L.qG)(o.style);t<=i&&n<=r&&i+s<=t+this.width&&r+a<=n+this.height&&e.push(o)})),e},handleContextMenu(e){e.stopPropagation(),e.preventDefault();let t=e.target,n=e.offsetY,o=e.offsetX;while(t instanceof SVGElement)t=t.parentNode;while(!t.className.includes("editor"))o+=t.offsetLeft,n+=t.offsetTop,t=t.parentNode;this.$store.commit("showContextMenu",{top:n,left:o})},getComponentStyle(e){return(0,L.gd)(e,this.svgFilterAttrs)},getSVGStyle(e){return(0,L.SC)(e,this.svgFilterAttrs)},handleInput(e,t){this.$store.commit("setShapeStyle",{height:this.getTextareaHeight(e,t)})},getTextareaHeight(e,t){let{lineHeight:n,fontSize:o,height:i}=e.style;""===n&&(n=1.5);const r=(t.split("<br>").length-1)*n*(o||this.canvasStyleData.fontSize);return i>r?i:r}}},ce=ae,le=(0,$.A)(ce,r,s,!1,null,"3b4d1a82",null),he=le.exports,pe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"component-list",on:{dragstart:e.handleDragStart}},e._l(e.componentList,(function(e,n){return t("div",{key:n,staticClass:"list",attrs:{draggable:"","data-index":n}},["el"===e.icon.substr(0,2)?t("span",{class:e.icon}):t("span",{staticClass:"iconfont",class:"icon-"+e.icon})])})),0)},ue=[],de=n(755),me={data(){return{componentList:de.Ay}},methods:{handleDragStart(e){e.dataTransfer.setData("index",e.target.dataset.index)}}},fe=me,ge=(0,$.A)(fe,pe,ue,!1,null,"72bade4e",null),ve=ge.exports,be=function(){var e=this,t=e._self._c;return t("div",{staticClass:"animation-list"},[t("div",{staticClass:"div-animation"},[t("el-button",{on:{click:function(t){e.isShowAnimation=!0}}},[e._v("添加动画")]),t("el-button",{on:{click:e.previewAnimate}},[e._v("预览动画")]),t("div",e._l(e.curComponent.animations,(function(n,o){return t("el-tag",{key:o,attrs:{closable:""},on:{close:function(t){return e.removeAnimation(o)}}},[e._v(" "+e._s(n.label)+" "),t("i",{staticClass:"cursor el-icon-setting",on:{click:function(t){return e.handleAnimationSetting(o)}}})])})),1)],1),t("Modal",{model:{value:e.isShowAnimation,callback:function(t){e.isShowAnimation=t},expression:"isShowAnimation"}},[t("el-tabs",{model:{value:e.animationActiveName,callback:function(t){e.animationActiveName=t},expression:"animationActiveName"}},e._l(e.animationClassData,(function(n){return t("el-tab-pane",{key:n.label,attrs:{label:n.label,name:n.label}},[t("el-scrollbar",{staticClass:"animate-container"},e._l(n.children,(function(n){return t("div",{key:n.value,ref:n.value,refInFor:!0,staticClass:"animate",on:{mouseenter:function(t){return e.runAnimation(n)},click:function(t){return e.addAnimation(n)}}},[t("div",[e._v(" "+e._s(n.label)+" ")])])})),0)],1)})),1)],1),e.isShowAnimationSetting?t("AnimationSettingModal",{attrs:{"cur-index":e.curIndex},on:{close:function(t){e.isShowAnimationSetting=!1}}}):e._e()],1)},ye=[],xe=function(){var e=this,t=e._self._c;return e.show?t("div",{staticClass:"modal-bg",on:{click:e.hide}},[t("div",{staticClass:"fadeInLeft animated modal",on:{click:e.stopPropagation}},[e._t("default")],2)]):e._e()},we=[],Se={model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!1}},methods:{hide(){this.$emit("change")},stopPropagation(e){e.stopPropagation()}}},Ce=Se,ke=(0,$.A)(Ce,xe,we,!1,null,"07a79456",null),_e=ke.exports;const Ae=[{label:"进入",children:[{label:"渐显",value:"fadeIn"},{label:"向右进入",value:"fadeInLeft"},{label:"向左进入",value:"fadeInRight"},{label:"向上进入",value:"fadeInUp"},{label:"向下进入",value:"fadeInDown"},{label:"向右长距进入",value:"fadeInLeftBig"},{label:"向左长距进入",value:"fadeInRightBig"},{label:"向上长距进入",value:"fadeInUpBig"},{label:"向下长距进入",value:"fadeInDownBig"},{label:"旋转进入",value:"rotateIn"},{label:"左顺时针旋转",value:"rotateInDownLeft"},{label:"右逆时针旋转",value:"rotateInDownRight"},{label:"左逆时针旋转",value:"rotateInUpLeft"},{label:"右逆时针旋转",value:"rotateInUpRight"},{label:"弹入",value:"bounceIn"},{label:"向右弹入",value:"bounceInLeft"},{label:"向左弹入",value:"bounceInRight"},{label:"向上弹入",value:"bounceInUp"},{label:"向下弹入",value:"bounceInDown"},{label:"光速从右进入",value:"lightSpeedIn"},{label:"光速从右退出",value:"lightSpeedOut"},{label:"中心X轴旋转",value:"flipInX"},{label:"中心Y轴旋转",value:"flipInY"},{label:"左长半径旋转",value:"rollIn"},{label:"由小变大进入",value:"zoomIn"},{label:"左变大进入",value:"zoomInLeft"},{label:"右变大进入",value:"zoomInRight"},{label:"向上变大进入",value:"zoomInUp"},{label:"向下变大进入",value:"zoomInDown"},{label:"向右滑动展开",value:"slideInLeft"},{label:"向左滑动展开",value:"slideInRight"},{label:"向上滑动展开",value:"slideInUp"},{label:"向下滑动展开",value:"slideInDown"}]},{label:"强调",children:[{label:"弹跳",value:"bounce"},{label:"闪烁",value:"flash"},{label:"放大缩小",value:"pulse"},{label:"放大缩小弹簧",value:"rubberBand"},{label:"左右晃动",value:"headShake"},{label:"左右扇形摇摆",value:"swing"},{label:"放大晃动缩小",value:"tada"},{label:"扇形摇摆",value:"wobble"},{label:"左右上下晃动",value:"jello"},{label:"Y轴旋转",value:"flip"}]},{label:"退出",children:[{label:"渐隐",value:"fadeOut"},{label:"向左退出",value:"fadeOutLeft"},{label:"向右退出",value:"fadeOutRight"},{label:"向上退出",value:"fadeOutUp"},{label:"向下退出",value:"fadeOutDown"},{label:"向左长距退出",value:"fadeOutLeftBig"},{label:"向右长距退出",value:"fadeOutRightBig"},{label:"向上长距退出",value:"fadeOutUpBig"},{label:"向下长距退出",value:"fadeOutDownBig"},{label:"旋转退出",value:"rotateOut"},{label:"左顺时针旋转",value:"rotateOutDownLeft"},{label:"右逆时针旋转",value:"rotateOutDownRight"},{label:"左逆时针旋转",value:"rotateOutUpLeft"},{label:"右逆时针旋转",value:"rotateOutUpRight"},{label:"弹出",value:"bounceOut"},{label:"向左弹出",value:"bounceOutLeft"},{label:"向右弹出",value:"bounceOutRight"},{label:"向上弹出",value:"bounceOutUp"},{label:"向下弹出",value:"bounceOutDown"},{label:"中心X轴旋转",value:"flipOutX"},{label:"中心Y轴旋转",value:"flipOutY"},{label:"左长半径旋转",value:"rollOut"},{label:"由小变大退出",value:"zoomOut"},{label:"左变大退出",value:"zoomOutLeft"},{label:"右变大退出",value:"zoomOutRight"},{label:"向上变大退出",value:"zoomOutUp"},{label:"向下变大退出",value:"zoomOutDown"},{label:"向左滑动收起",value:"slideOutLeft"},{label:"向右滑动收起",value:"slideOutRight"},{label:"向上滑动收起",value:"slideOutUp"},{label:"向下滑动收起",value:"slideOutDown"}]}];Ae.forEach((e=>{e.children.forEach((e=>{e.pending=!1,e.animationTime=1}))}));var $e=Ae,Ee=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:`${e.config.label} 动画配置`,visible:e.centerDialogVisible,width:"30%",center:""},on:{close:e.handleCloseModal}},[t("div",{staticClass:"time"},[e._v(" 动画时长："),t("el-input-number",{attrs:{"controls-position":"right",min:.1,precision:2,step:.01},model:{value:e.config.animationTime,callback:function(t){e.$set(e.config,"animationTime",t)},expression:"config.animationTime"}})],1),t("div",{staticClass:"loop"},[e._v(" 是否循环："),t("el-switch",{attrs:{"active-text":"是","inactive-text":"否",disabled:e.isDisabled},model:{value:e.config.isLoop,callback:function(t){e.$set(e.config,"isLoop",t)},expression:"config.isLoop"}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleCloseModal}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleSaveSetting}},[e._v("确 定")])],1)])},Te=[],Le={name:"AnimationSettingModal",props:{curIndex:{type:Number,default:0}},data(){return{centerDialogVisible:!0,config:{}}},computed:{...(0,a.aH)(["curComponent"]),isDisabled(){return this.curComponent.animations.length>1}},created(){const{label:e,animationTime:t,isLoop:n=!1,value:o}=this.curComponent.animations[this.curIndex]||{};this.config={animationTime:t,label:e,isLoop:n,value:o}},methods:{handleCloseModal(){this.$emit("close")},handleSaveSetting(){const{isLoop:e}=this.config;this.$store.commit("alterAnimation",{index:this.curIndex,data:{animationTime:this.config.animationTime,isLoop:e}}),h.A.$emit("stopAnimation"),this.handleCloseModal()}}},Re=Le,Me=(0,$.A)(Re,Ee,Te,!1,null,"44cdae03",null),Oe=Me.exports,De={components:{Modal:_e,AnimationSettingModal:Oe},data(){return{isShowAnimation:!1,hoverPreviewAnimate:"",animationActiveName:"进入",animationClassData:$e,showAnimatePanel:!1,timer:null,isShowAnimationSetting:!1,curIndex:0}},computed:(0,a.aH)(["curComponent"]),methods:{addAnimation(e){this.$store.commit("addAnimation",e),this.isShowAnimation=!1},previewAnimate(){h.A.$emit("runAnimation")},removeAnimation(e){this.$store.commit("removeAnimation",e),this.curComponent.animations.length||h.A.$emit("stopAnimation")},handleAnimationSetting(e){this.isShowAnimationSetting=!0,this.curIndex=e},async runAnimation(e){e.pending||(e.pending=!0,await p(this.$refs[e.value][0],[e]),setTimeout((()=>{e.pending=!1}),100))}}},Ne=De,Ie=(0,$.A)(Ne,be,ye,!1,null,null,null),Pe=Ie.exports,He=function(){var e=this,t=e._self._c;return t("div",{staticClass:"event-list"},[t("div",{staticClass:"div-events"},[t("el-button",{on:{click:function(t){e.isShowEvent=!0}}},[e._v("添加事件")]),t("div",e._l(Object.keys(e.curComponent.events),(function(n){return t("el-tag",{key:n,attrs:{closable:""},on:{close:function(t){return e.removeEvent(n)}}},[e._v(" "+e._s(n)+" ")])})),1)],1),t("Modal",{model:{value:e.isShowEvent,callback:function(t){e.isShowEvent=t},expression:"isShowEvent"}},[t("el-tabs",{model:{value:e.eventActiveName,callback:function(t){e.eventActiveName=t},expression:"eventActiveName"}},e._l(e.eventList,(function(n){return t("el-tab-pane",{key:n.key,staticStyle:{padding:"40px 20px 0"},attrs:{label:n.label,name:n.key}},["redirect"==n.key?t("el-input",{attrs:{type:"textarea",placeholder:"请输入完整的 URL"},nativeOn:{keydown:function(e){e.stopPropagation()}},model:{value:n.param,callback:function(t){e.$set(n,"param",t)},expression:"item.param"}}):e._e(),"alert"==n.key?t("el-input",{attrs:{type:"textarea",placeholder:"请输入要 alert 的内容"},nativeOn:{keydown:function(e){e.stopPropagation()}},model:{value:n.param,callback:function(t){e.$set(n,"param",t)},expression:"item.param"}}):e._e(),t("el-button",{staticStyle:{"margin-top":"20px"},on:{click:function(t){return e.addEvent(n.key,n.param)}}},[e._v("确定")])],1)})),1)],1)],1)},Be=[];const We={redirect(e){e&&(window.location.href=e)},alert(e){e&&alert(e)}},Fe={methods:We},Ue=[{key:"redirect",label:"跳转事件",event:We.redirect,param:""},{key:"alert",label:"alert 事件",event:We.alert,param:""}];var ze={components:{Modal:_e},data(){return{isShowEvent:!1,eventURL:"",eventActiveName:"redirect",eventList:Ue}},computed:(0,a.aH)(["curComponent"]),methods:{addEvent(e,t){this.isShowEvent=!1,this.$store.commit("addEvent",{event:e,param:t})},removeEvent(e){this.$store.commit("removeEvent",e)}}},Ve=ze,Ge=(0,$.A)(Ve,He,Be,!1,null,"038bea5c",null),je=Ge.exports,qe=function(){var e=this,t=e._self._c;return t("div",[t("div",{class:e.isDarkMode?"dark toolbar":"toolbar"},[t("el-button",{on:{click:e.onAceEditorChange}},[e._v("JSON")]),t("el-button",{on:{click:e.onImportJSON}},[e._v("导入")]),t("el-button",{on:{click:e.onExportJSON}},[e._v("导出")]),t("el-button",{on:{click:e.undo}},[e._v("撤消")]),t("el-button",{on:{click:e.redo}},[e._v("重做")]),t("label",{staticClass:"insert",attrs:{for:"input"}},[e._v(" 插入图片 "),t("input",{attrs:{id:"input",type:"file",hidden:""},on:{change:e.handleFileChange}})]),t("el-button",{staticStyle:{"margin-left":"10px"},on:{click:function(t){return e.preview(!1)}}},[e._v(" 预览 ")]),t("el-button",{on:{click:e.save}},[e._v("保存")]),t("el-button",{on:{click:e.clearCanvas}},[e._v("清空画布")]),t("el-button",{attrs:{disabled:!e.areaData.components.length},on:{click:e.compose}},[e._v(" 组合 ")]),t("el-button",{attrs:{disabled:!e.curComponent||e.curComponent.isLock||"Group"!=e.curComponent.component},on:{click:e.decompose}},[e._v(" 拆分 ")]),t("el-button",{attrs:{disabled:!e.curComponent||e.curComponent.isLock},on:{click:e.lock}},[e._v(" 锁定 ")]),t("el-button",{attrs:{disabled:!e.curComponent||!e.curComponent.isLock},on:{click:e.unlock}},[e._v(" 解锁 ")]),t("el-button",{on:{click:function(t){return e.preview(!0)}}},[e._v("截图")]),t("div",{staticClass:"canvas-config"},[t("span",[e._v("画布大小")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.canvasStyleData.width,expression:"canvasStyleData.width"}],domProps:{value:e.canvasStyleData.width},on:{input:function(t){t.target.composing||e.$set(e.canvasStyleData,"width",t.target.value)}}}),t("span",[e._v("*")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.canvasStyleData.height,expression:"canvasStyleData.height"}],domProps:{value:e.canvasStyleData.height},on:{input:function(t){t.target.composing||e.$set(e.canvasStyleData,"height",t.target.value)}}})]),t("div",{staticClass:"canvas-config"},[t("span",[e._v("画布比例")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.scale,expression:"scale"}],domProps:{value:e.scale},on:{input:[function(t){t.target.composing||(e.scale=t.target.value)},e.handleScaleChange]}}),e._v(" % ")]),t("el-switch",{staticClass:"dark-mode-switch",attrs:{"active-icon-class":"el-icon-sunny","inactive-icon-class":"el-icon-moon","active-color":"#000"},on:{change:e.handleToggleDarkMode},model:{value:e.switchValue,callback:function(t){e.switchValue=t},expression:"switchValue"}}),e.showComponentAlign?t("el-dropdown",{staticClass:"align-dropdown",attrs:{"hide-on-click":!1,trigger:"click"},on:{command:e.handleComponentAlign}},[t("el-button",{attrs:{type:"primary"}},[e._v(" 对齐方式 "),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.alignList,(function(n){return t("el-dropdown-item",{key:n.value,attrs:{command:n.value,disabled:!!n.isDisabled&&e.areaData.components.length<3}},[e._v(" "+e._s(n.label)+" ")])})),1)],1):e._e()],1),e.isShowPreview?t("Preview",{attrs:{"is-screenshot":e.isScreenshot},on:{close:e.handlePreviewChange}}):e._e(),e.isShowAceEditor?t("AceEditor",{on:{closeEditor:e.closeEditor}}):e._e(),t("el-dialog",{attrs:{title:e.isExport?"导出数据":"导入数据",visible:e.isShowDialog,"close-on-press-escape":!1,"close-on-click-modal":!1,width:"600"},on:{"update:visible":function(t){e.isShowDialog=t}}},[t("el-input",{attrs:{type:"textarea",rows:20,placeholder:"请输入 JSON 数据"},model:{value:e.jsonData,callback:function(t){e.jsonData=t},expression:"jsonData"}}),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.isShowDialog=!1}}},[e._v("取 消")]),t("el-upload",{directives:[{name:"show",rawName:"v-show",value:!e.isExport,expression:"!isExport"}],attrs:{action:"/","before-upload":e.beforeUpload,"show-file-list":!1,accept:"application/json"}},[t("el-button",{attrs:{type:"primary"}},[e._v("选择 JSON 文件")])],1),t("el-button",{attrs:{type:"primary"},on:{click:e.processJSON}},[e._v("确 定")])],1)],1)],1)},Xe=[],Ye=(n(4603),n(7566),n(8721),n(5123)),Ke=n(5242),Je=function(){var e=this,t=e._self._c;return t("div",{ref:"container",staticClass:"bg"},[e.isScreenshot?t("el-button",{staticClass:"close",on:{click:e.htmlToImage}},[e._v("确定")]):t("el-button",{staticClass:"close",on:{click:e.close}},[e._v("关闭")]),t("div",{staticClass:"canvas-container"},[t("div",{staticClass:"canvas",style:{...e.getCanvasStyle(e.canvasStyleData),width:e.changeStyleWithScale(e.canvasStyleData.width)+"px",height:e.changeStyleWithScale(e.canvasStyleData.height)+"px"}},e._l(e.copyData,(function(e,n){return t("ComponentWrapper",{key:n,attrs:{config:e}})})),1)])],1)},Qe=[],Ze=function(){var e=this,t=e._self._c;return t("div",{on:{click:e.onClick,mouseenter:e.onMouseEnter}},[e.config.component.startsWith("SVG")?t(e.config.component,{ref:"component",tag:"component",staticClass:"component",style:e.getSVGStyle(e.config.style),attrs:{"prop-value":e.config.propValue,element:e.config,request:e.config.request,linkage:e.config.linkage}}):t(e.config.component,{ref:"component",tag:"component",staticClass:"component",style:e.getStyle(e.config.style),attrs:{"prop-value":e.config.propValue,element:e.config,request:e.config.request,linkage:e.config.linkage}})],1)},et=[],tt={mixins:[Fe],props:{config:{type:Object,required:!0,default:()=>{}}},mounted(){p(this.$refs.component.$el,this.config.animations)},methods:{getStyle:L.gd,getSVGStyle:L.SC,onClick(){const e=this.config.events;Object.keys(e).forEach((t=>{this[t](e[t])})),h.A.$emit("v-click",this.config.id)},onMouseEnter(){h.A.$emit("v-hover",this.config.id)}}},nt=tt,ot=(0,$.A)(nt,Ze,et,!1,null,"2c46d3f8",null),it=ot.exports;function rt(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),o=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(o),n.body.appendChild(i),t&&(o.href=t),i.href=e,i.href}const st=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4|0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function at(e){const t=[];for(let n=0,o=e.length;n<o;n++)t.push(e[n]);return t}function ct(e,t){const n=e.ownerDocument.defaultView||window,o=n.getComputedStyle(e).getPropertyValue(t);return o?parseFloat(o.replace("px","")):0}function lt(e){const t=ct(e,"border-left-width"),n=ct(e,"border-right-width");return e.clientWidth+t+n}function ht(e){const t=ct(e,"border-top-width"),n=ct(e,"border-bottom-width");return e.clientHeight+t+n}function pt(e,t={}){const n=t.width||lt(e),o=t.height||ht(e);return{width:n,height:o}}function ut(){let e,t;try{t=process}catch(o){}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const dt=16384;function mt(e){(e.width>dt||e.height>dt)&&(e.width>dt&&e.height>dt?e.width>e.height?(e.height*=dt/e.width,e.width=dt):(e.width*=dt/e.height,e.height=dt):e.width>dt?(e.height*=dt/e.width,e.width=dt):(e.width*=dt/e.height,e.height=dt))}function ft(e){return new Promise(((t,n)=>{const o=new Image;o.decode=()=>t(o),o.onload=()=>t(o),o.onerror=n,o.crossOrigin="anonymous",o.decoding="async",o.src=e}))}async function gt(e){return Promise.resolve().then((()=>(new XMLSerializer).serializeToString(e))).then(encodeURIComponent).then((e=>`data:image/svg+xml;charset=utf-8,${e}`))}async function vt(e,t,n){const o="http://www.w3.org/2000/svg",i=document.createElementNS(o,"svg"),r=document.createElementNS(o,"foreignObject");return i.setAttribute("width",`${t}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${t} ${n}`),r.setAttribute("width","100%"),r.setAttribute("height","100%"),r.setAttribute("x","0"),r.setAttribute("y","0"),r.setAttribute("externalResourcesRequired","true"),i.appendChild(r),r.appendChild(e),gt(i)}const bt=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return null!==n&&(n.constructor.name===t.name||bt(n,t))};function yt(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function xt(e){return at(e).map((t=>{const n=e.getPropertyValue(t),o=e.getPropertyPriority(t);return`${t}: ${n}${o?" !important":""};`})).join(" ")}function wt(e,t,n){const o=`.${e}:${t}`,i=n.cssText?yt(n):xt(n);return document.createTextNode(`${o}{${i}}`)}function St(e,t,n){const o=window.getComputedStyle(e,n),i=o.getPropertyValue("content");if(""===i||"none"===i)return;const r=st();try{t.className=`${t.className} ${r}`}catch(a){return}const s=document.createElement("style");s.appendChild(wt(r,n,o)),t.appendChild(s)}function Ct(e,t){St(e,t,":before"),St(e,t,":after")}const kt="application/font-woff",_t="image/jpeg",At={woff:kt,woff2:kt,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:_t,jpeg:_t,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function $t(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function Et(e){const t=$t(e).toLowerCase();return At[t]||""}function Tt(e){return e.split(/,/)[1]}function Lt(e){return-1!==e.search(/^(data:)/)}function Rt(e,t){return`data:${t};base64,${e}`}async function Mt(e,t,n){const o=await fetch(e,t);if(404===o.status)throw new Error(`Resource "${o.url}" not found`);const i=await o.blob();return new Promise(((e,t)=>{const r=new FileReader;r.onerror=t,r.onloadend=()=>{try{e(n({res:o,result:r.result}))}catch(i){t(i)}},r.readAsDataURL(i)}))}const Ot={};function Dt(e,t,n){let o=e.replace(/\?.*/,"");return n&&(o=e),/ttf|otf|eot|woff2?/i.test(o)&&(o=o.replace(/.*\//,"")),t?`[${t}]${o}`:o}async function Nt(e,t,n){const o=Dt(e,t,n.includeQueryParams);if(null!=Ot[o])return Ot[o];let i;n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());try{const o=await Mt(e,n.fetchRequestInit,(({res:e,result:n})=>(t||(t=e.headers.get("Content-Type")||""),Tt(n))));i=Rt(o,t)}catch(r){i=n.imagePlaceholder||"";let t=`Failed to fetch resource: ${e}`;r&&(t="string"===typeof r?r:r.message),t&&console.warn(t)}return Ot[o]=i,i}async function It(e){const t=e.toDataURL();return"data:,"===t?e.cloneNode(!1):ft(t)}async function Pt(e,t){if(e.currentSrc){const t=document.createElement("canvas"),n=t.getContext("2d");t.width=e.clientWidth,t.height=e.clientHeight,null===n||void 0===n||n.drawImage(e,0,0,t.width,t.height);const o=t.toDataURL();return ft(o)}const n=e.poster,o=Et(n),i=await Nt(n,o,t);return ft(i)}async function Ht(e){var t;try{if(null===(t=null===e||void 0===e?void 0:e.contentDocument)||void 0===t?void 0:t.body)return await qt(e.contentDocument.body,{},!0)}catch(n){}return e.cloneNode(!1)}async function Bt(e,t){return bt(e,HTMLCanvasElement)?It(e):bt(e,HTMLVideoElement)?Pt(e,t):bt(e,HTMLIFrameElement)?Ht(e):e.cloneNode(!1)}const Wt=e=>null!=e.tagName&&"SLOT"===e.tagName.toUpperCase();async function Ft(e,t,n){var o,i;let r=[];return r=Wt(e)&&e.assignedNodes?at(e.assignedNodes()):bt(e,HTMLIFrameElement)&&(null===(o=e.contentDocument)||void 0===o?void 0:o.body)?at(e.contentDocument.body.childNodes):at((null!==(i=e.shadowRoot)&&void 0!==i?i:e).childNodes),0===r.length||bt(e,HTMLVideoElement)||await r.reduce(((e,o)=>e.then((()=>qt(o,n))).then((e=>{e&&t.appendChild(e)}))),Promise.resolve()),t}function Ut(e,t){const n=t.style;if(!n)return;const o=window.getComputedStyle(e);o.cssText?(n.cssText=o.cssText,n.transformOrigin=o.transformOrigin):at(o).forEach((i=>{let r=o.getPropertyValue(i);if("font-size"===i&&r.endsWith("px")){const e=Math.floor(parseFloat(r.substring(0,r.length-2)))-.1;r=`${e}px`}bt(e,HTMLIFrameElement)&&"display"===i&&"inline"===r&&(r="block"),"d"===i&&t.getAttribute("d")&&(r=`path(${t.getAttribute("d")})`),n.setProperty(i,r,o.getPropertyPriority(i))}))}function zt(e,t){bt(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),bt(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function Vt(e,t){if(bt(e,HTMLSelectElement)){const n=t,o=Array.from(n.children).find((t=>e.value===t.getAttribute("value")));o&&o.setAttribute("selected","")}}function Gt(e,t){return bt(t,Element)&&(Ut(e,t),Ct(e,t),zt(e,t),Vt(e,t)),t}async function jt(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(0===n.length)return e;const o={};for(let r=0;r<n.length;r++){const i=n[r],s=i.getAttribute("xlink:href");if(s){const n=e.querySelector(s),i=document.querySelector(s);n||!i||o[s]||(o[s]=await qt(i,t,!0))}}const i=Object.values(o);if(i.length){const t="http://www.w3.org/1999/xhtml",n=document.createElementNS(t,"svg");n.setAttribute("xmlns",t),n.style.position="absolute",n.style.width="0",n.style.height="0",n.style.overflow="hidden",n.style.display="none";const o=document.createElementNS(t,"defs");n.appendChild(o);for(let e=0;e<i.length;e++)o.appendChild(i[e]);e.appendChild(n)}return e}async function qt(e,t,n){return n||!t.filter||t.filter(e)?Promise.resolve(e).then((e=>Bt(e,t))).then((n=>Ft(e,n,t))).then((t=>Gt(e,t))).then((e=>jt(e,t))):null}const Xt=/url\((['"]?)([^'"]+?)\1\)/g,Yt=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Kt=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Jt(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Qt(e){const t=[];return e.replace(Xt,((e,n,o)=>(t.push(o),e))),t.filter((e=>!Lt(e)))}async function Zt(e,t,n,o,i){try{const r=n?rt(t,n):t,s=Et(t);let a;if(i){const e=await i(r);a=Rt(e,s)}else a=await Nt(r,s,o);return e.replace(Jt(t),`$1${a}$3`)}catch(r){}return e}function en(e,{preferredFontFormat:t}){return t?e.replace(Kt,(e=>{while(1){const[n,,o]=Yt.exec(e)||[];if(!o)return"";if(o===t)return`src: ${n};`}})):e}function tn(e){return-1!==e.search(Xt)}async function nn(e,t,n){if(!tn(e))return e;const o=en(e,n),i=Qt(o);return i.reduce(((e,o)=>e.then((e=>Zt(e,o,t,n)))),Promise.resolve(o))}async function on(e,t,n){var o;const i=null===(o=t.style)||void 0===o?void 0:o.getPropertyValue(e);if(i){const o=await nn(i,null,n);return t.style.setProperty(e,o,t.style.getPropertyPriority(e)),!0}return!1}async function rn(e,t){await on("background",e,t)||await on("background-image",e,t),await on("mask",e,t)||await on("mask-image",e,t)}async function sn(e,t){const n=bt(e,HTMLImageElement);if((!n||Lt(e.src))&&(!bt(e,SVGImageElement)||Lt(e.href.baseVal)))return;const o=n?e.src:e.href.baseVal,i=await Nt(o,Et(o),t);await new Promise(((t,o)=>{e.onload=t,e.onerror=o;const r=e;r.decode&&(r.decode=t),"lazy"===r.loading&&(r.loading="eager"),n?(e.srcset="",e.src=i):e.href.baseVal=i}))}async function an(e,t){const n=at(e.childNodes),o=n.map((e=>cn(e,t)));await Promise.all(o).then((()=>e))}async function cn(e,t){bt(e,Element)&&(await rn(e,t),await sn(e,t),await an(e,t))}function ln(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const o=t.style;return null!=o&&Object.keys(o).forEach((e=>{n[e]=o[e]})),e}const hn={};async function pn(e){let t=hn[e];if(null!=t)return t;const n=await fetch(e),o=await n.text();return t={url:e,cssText:o},hn[e]=t,t}async function un(e,t){let n=e.cssText;const o=/url\(["']?([^"')]+)["']?\)/g,i=n.match(/url\([^)]+\)/g)||[],r=i.map((async i=>{let r=i.replace(o,"$1");return r.startsWith("https://")||(r=new URL(r,e.url).href),Mt(r,t.fetchRequestInit,(({result:e})=>(n=n.replace(i,`url(${e})`),[i,e])))}));return Promise.all(r).then((()=>n))}function dn(e){if(null==e)return[];const t=[],n=/(\/\*[\s\S]*?\*\/)/gi;let o=e.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");while(1){const e=i.exec(o);if(null===e)break;t.push(e[0])}o=o.replace(i,"");const r=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",a=new RegExp(s,"gi");while(1){let e=r.exec(o);if(null===e){if(e=a.exec(o),null===e)break;r.lastIndex=a.lastIndex}else a.lastIndex=r.lastIndex;t.push(e[0])}return t}async function mn(e,t){const n=[],o=[];return e.forEach((n=>{if("cssRules"in n)try{at(n.cssRules||[]).forEach(((e,i)=>{if(e.type===CSSRule.IMPORT_RULE){let r=i+1;const s=e.href,a=pn(s).then((e=>un(e,t))).then((e=>dn(e).forEach((e=>{try{n.insertRule(e,e.startsWith("@import")?r+=1:n.cssRules.length)}catch(t){console.error("Error inserting rule from remote css",{rule:e,error:t})}})))).catch((e=>{console.error("Error loading remote css",e.toString())}));o.push(a)}}))}catch(i){const r=e.find((e=>null==e.href))||document.styleSheets[0];null!=n.href&&o.push(pn(n.href).then((e=>un(e,t))).then((e=>dn(e).forEach((e=>{r.insertRule(e,n.cssRules.length)})))).catch((e=>{console.error("Error loading remote stylesheet",e)}))),console.error("Error inlining remote css file",i)}})),Promise.all(o).then((()=>(e.forEach((e=>{if("cssRules"in e)try{at(e.cssRules||[]).forEach((e=>{n.push(e)}))}catch(t){console.error(`Error while reading CSS rules from ${e.href}`,t)}})),n)))}function fn(e){return e.filter((e=>e.type===CSSRule.FONT_FACE_RULE)).filter((e=>tn(e.style.getPropertyValue("src"))))}async function gn(e,t){if(null==e.ownerDocument)throw new Error("Provided element is not within a Document");const n=at(e.ownerDocument.styleSheets),o=await mn(n,t);return fn(o)}async function vn(e,t){const n=await gn(e,t),o=await Promise.all(n.map((e=>{const n=e.parentStyleSheet?e.parentStyleSheet.href:null;return nn(e.cssText,n,t)})));return o.join("\n")}async function bn(e,t){const n=null!=t.fontEmbedCSS?t.fontEmbedCSS:t.skipFonts?null:await vn(e,t);if(n){const t=document.createElement("style"),o=document.createTextNode(n);t.appendChild(o),e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}}async function yn(e,t={}){const{width:n,height:o}=pt(e,t),i=await qt(e,t,!0);await bn(i,t),await cn(i,t),ln(i,t);const r=await vt(i,n,o);return r}async function xn(e,t={}){const{width:n,height:o}=pt(e,t),i=await yn(e,t),r=await ft(i),s=document.createElement("canvas"),a=s.getContext("2d"),c=t.pixelRatio||ut(),l=t.canvasWidth||n,h=t.canvasHeight||o;return s.width=l*c,s.height=h*c,t.skipAutoScale||mt(s),s.style.width=`${l}`,s.style.height=`${h}`,t.backgroundColor&&(a.fillStyle=t.backgroundColor,a.fillRect(0,0,s.width,s.height)),a.drawImage(r,0,0,s.width,s.height),s}async function wn(e,t={}){const n=await xn(e,t);return n.toDataURL()}var Sn={components:{ComponentWrapper:it},props:{isScreenshot:{type:Boolean,default:!1}},data(){return{copyData:[]}},computed:(0,a.aH)(["componentData","canvasStyleData"]),created(){this.$set(this,"copyData",(0,k.A4)(this.componentData))},methods:{getStyle:L.gd,getCanvasStyle:L.O_,changeStyleWithScale:d.Gq,close(){this.$emit("close")},htmlToImage(){wn(this.$refs.container.querySelector(".canvas")).then((e=>{const t=document.createElement("a");t.setAttribute("download","screenshot"),t.href=e,t.click()})).catch((e=>{console.error("oops, something went wrong!",e)})).finally(this.close)}}},Cn=Sn,kn=(0,$.A)(Cn,Je,Qe,!1,null,"be117946",null),_n=kn.exports,An=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ace"},[t("div",{staticClass:"header"},[t("el-button",{staticClass:"btn",attrs:{icon:"el-icon-search"},on:{click:e.openSearchBox}},[e._v(" 查找 ")]),t("el-button",{staticClass:"btn",attrs:{icon:"el-icon-close"},on:{click:e.closeEditor}},[e._v(" 关闭 ")])],1),t("div",{staticClass:"ace-editor"},[t("div",{ref:"ace",staticClass:"editor"})]),t("div",{staticClass:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.setCode}},[e._v(" 重置代码 ")]),t("el-button",{attrs:{type:"success"},on:{click:e.getCode}},[e._v(" 保存提交 ")])],1)])},$n=[],En=n(952),Tn=n.n(En),Ln=(n(9855),n(639),n(3489),n(86),{name:"AceEditor",data(){return{editor:null,obj:null}},computed:(0,a.aH)(["canvasStyleData","curComponent"]),watch:{curComponent(){this.setCode()},canvasStyleData(){this.setCode()}},mounted(){Tn().config.set("basePath","https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.14/"),this.editor=Tn().edit(this.$refs.ace,{maxLines:40,minLines:40,fontSize:14,theme:"ace/theme/one_dark",mode:"ace/mode/json5",tabSize:4,readOnly:!1,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0}),this.obj=this.curComponent||this.canvasStyleData,this.editor.setValue(JSON.stringify(this.obj,null,4))},methods:{setCode(){this.obj=this.curComponent||this.canvasStyleData,this.editor.setValue(JSON.stringify(this.obj,null,4))},getCode(){let e=this.editor.getValue();this.curComponent?this.$store.commit("aceSetcurComponent",JSON.parse(e)):this.$store.commit("aceSetCanvasData",JSON.parse(e))},updateEditorTheme(e){this.editor.setTheme(e)},openSearchBox(){this.editor.execCommand("find")},closeEditor(){this.$emit("closeEditor")}}}),Rn=Ln,Mn=(0,$.A)(Rn,An,$n,!1,null,"effb328e",null),On=Mn.exports,Dn=n(7236),Nn={components:{Preview:_n,AceEditor:On},data(){return{isShowPreview:!1,isShowAceEditor:!1,timer:null,isScreenshot:!1,scale:100,switchValue:!1,isShowDialog:!1,jsonData:"",isExport:!1,alignList:[{label:"左对齐",value:"leftAlign"},{label:"水平居中",value:"centerAlign"},{label:"右对齐",value:"rightAlign"},{label:"顶对齐",value:"topAlign"},{label:"垂直居中",value:"middleAlign"},{label:"底对齐",value:"bottomAlign"},{label:"水平等间距",value:"horizontalSpacing",isDisabled:!0},{label:"垂直等间距",value:"verticalSpacing",isDisabled:!0}]}},computed:{...(0,a.aH)(["componentData","canvasStyleData","areaData","curComponent","curComponentIndex","isDarkMode"]),showComponentAlign(){return this.curComponent&&!this.curComponent.isLock||this.areaData.components.length>1}},created(){h.A.$on("preview",this.preview),h.A.$on("save",this.save),h.A.$on("clearCanvas",this.clearCanvas),this.scale=this.canvasStyleData.scale;const e=JSON.parse(localStorage.getItem("isDarkMode"));e&&this.handleToggleDarkMode(e)},methods:{handleComponentAlign(e){this.$store.commit(e),this.$store.commit("recordSnapshot");let t=1/0,n=1/0,o=-1/0,i=-1/0;this.areaData.components.length>1&&(this.areaData.components.forEach((e=>{let r=(0,L.qG)(e.style);r.left<n&&(n=r.left),r.top<t&&(t=r.top),r.right>o&&(o=r.right),r.bottom>i&&(i=r.bottom)})),this.$store.commit("setAreaData",{style:{left:n,top:t,width:o-n,height:i-t},components:this.areaData.components}))},handleToggleDarkMode(e){null!==e&&(this.$store.commit("toggleDarkMode",e),this.switchValue=e)},handleScaleChange(){clearTimeout(this.timer),this.$store.commit("setLastScale",this.scale),this.timer=setTimeout((()=>{this.scale=~~this.scale||1,(0,Dn.A)(this.scale)}),1e3)},onAceEditorChange(){this.isShowAceEditor=!this.isShowAceEditor},closeEditor(){this.onAceEditorChange()},lock(){this.$store.commit("lock")},unlock(){this.$store.commit("unlock")},compose(){this.$store.commit("compose"),this.$store.commit("recordSnapshot")},decompose(){this.$store.commit("decompose"),this.$store.commit("recordSnapshot")},undo(){this.$store.commit("undo")},redo(){this.$store.commit("redo")},handleFileChange(e){const t=e.target.files[0];if(!t.type.includes("image"))return void(0,Ke.A)("只能插入图片");const n=new FileReader;n.onload=e=>{const t=e.target.result,n=new Image;n.onload=()=>{const e={...de.ZZ,id:(0,Ye.A)(),component:"Picture",label:"图片",icon:"",propValue:{url:t,flip:{horizontal:!1,vertical:!1}},style:{...de.FI,top:0,left:0,width:n.width,height:n.height}};(0,Dn.N)(e),this.$store.commit("addComponent",{component:e}),this.$store.commit("recordSnapshot"),(0,k.$)("#input").setAttribute("type","text"),(0,k.$)("#input").setAttribute("type","file")},n.src=t},n.readAsDataURL(t)},preview(e){this.isScreenshot=e,this.isShowPreview=!0,this.$store.commit("setEditMode","preview")},save(){localStorage.setItem("canvasData",JSON.stringify(this.componentData)),localStorage.setItem("canvasStyle",JSON.stringify(this.canvasStyleData)),this.$message.success("保存成功")},clearCanvas(){this.$store.commit("setCurComponent",{component:null,index:null}),this.$store.commit("setComponentData",[]),this.$store.commit("recordSnapshot")},handlePreviewChange(){this.isShowPreview=!1,this.$store.commit("setEditMode","edit")},onImportJSON(){this.jsonData="",this.isExport=!1,this.isShowDialog=!0},processJSON(){try{const e=JSON.parse(this.jsonData);if(!Array.isArray(e))return void this.$message.error("数据格式错误，组件数据必须是一个数组");this.isExport?this.downloadFileUtil(this.jsonData,"application/json","data.json"):this.$store.commit("setComponentData",e),this.isShowDialog=!1}catch(e){this.$message.error("数据格式错误，请传入合法的 JSON 格式数据")}},onExportJSON(){this.isShowDialog=!0,this.isExport=!0,this.jsonData=JSON.stringify(this.componentData,null,4)},downloadFileUtil(e,t,n=""){const o=window.URL.createObjectURL(new Blob([e],{type:t})),i=document.createElement("a");i.style.display="none",i.href=o,i.setAttribute("download",n),document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(o)},beforeUpload(e){const t=new FileReader;t.readAsText(e);const n=this;return t.onload=function(){n.jsonData=this.result,console.log(this.result)},!1}}},In=Nn,Pn=(0,$.A)(In,qe,Xe,!1,null,"7107ae8e",null),Hn=Pn.exports,Bn=n(8164),Wn=function(){var e=this,t=e._self._c;return t("div",{staticClass:"real-time-component-list"},e._l(e.componentData,(function(n,o){return t("div",{key:o,staticClass:"list",class:{actived:e.transformIndex(o)===e.curComponentIndex},on:{click:function(t){e.onClick(e.transformIndex(o))}}},[t("span",{staticClass:"iconfont",class:"icon-"+e.getComponent(o).icon}),t("span",[e._v(e._s(e.getComponent(o).label))]),t("div",{staticClass:"icon-container"},[t("span",{staticClass:"iconfont icon-shangyi",on:{click:function(t){e.upComponent(e.transformIndex(o))}}}),t("span",{staticClass:"iconfont icon-xiayi",on:{click:function(t){e.downComponent(e.transformIndex(o))}}}),t("span",{staticClass:"iconfont icon-shanchu",on:{click:function(t){e.deleteComponent(e.transformIndex(o))}}})])])})),0)},Fn=[],Un={computed:(0,a.aH)(["componentData","curComponent","curComponentIndex"]),methods:{getComponent(e){return this.componentData[this.componentData.length-1-e]},transformIndex(e){return this.componentData.length-1-e},onClick(e){this.$store.state.rightList||this.$store.commit("isShowRightList"),this.setCurComponent(e)},deleteComponent(){setTimeout((()=>{this.$store.commit("deleteComponent"),this.$store.commit("recordSnapshot")}))},upComponent(){setTimeout((()=>{this.$store.commit("upComponent"),this.$store.commit("recordSnapshot")}))},downComponent(){setTimeout((()=>{this.$store.commit("downComponent"),this.$store.commit("recordSnapshot")}))},setCurComponent(e){this.$store.commit("setCurComponent",{component:this.componentData[e],index:e})}}},zn=Un,Vn=(0,$.A)(zn,Wn,Fn,!1,null,"3360f3fc",null),Gn=Vn.exports,jn=function(){var e=this,t=e._self._c;return t("div",{staticClass:"attr-container"},[t("p",{staticClass:"title"},[e._v("画布属性")]),t("el-form",{staticStyle:{padding:"20px"}},e._l(Object.keys(e.options),(function(n,o){return t("el-form-item",{key:o,attrs:{label:e.options[n]}},[e.isIncludesColor(n)?t("el-color-picker",{attrs:{"show-alpha":""},model:{value:e.canvasStyleData[n],callback:function(t){e.$set(e.canvasStyleData,n,t)},expression:"canvasStyleData[key]"}}):t("el-input",{attrs:{type:"number"},model:{value:e.canvasStyleData[n],callback:function(t){e.$set(e.canvasStyleData,n,e._n(t))},expression:"canvasStyleData[key]"}})],1)})),1)],1)},qn=[],Xn={data(){return{options:{color:"颜色",opacity:"不透明度",backgroundColor:"背景色",fontSize:"字体大小"}}},computed:(0,a.aH)(["canvasStyleData"]),methods:{isIncludesColor(e){return e.toLowerCase().includes("color")}}},Yn=Xn,Kn=(0,$.A)(Yn,jn,qn,!1,null,null,null),Jn=Kn.exports,Qn=n(6865),Zn={components:{Editor:he,ComponentList:ve,AnimationList:Pe,EventList:je,Toolbar:Hn,RealTimeComponentList:Gn,CanvasAttr:Jn},data(){return{activeName:"attr",reSelectAnimateIndex:void 0,leftList:!0}},computed:(0,a.aH)(["componentData","curComponent","isClickComponent","canvasStyleData","editor","rightList","isDarkMode"]),created(){this.restore(),(0,Bn.M)();const e=localStorage.getItem("isDarkMode");null!==e?this.$store.commit("toggleDarkMode",JSON.parse(e)):this.$store.isDarkMode=!1},methods:{restore(){localStorage.getItem("canvasData")&&((0,Qn.N)(JSON.parse(localStorage.getItem("canvasData"))),this.$store.commit("setComponentData",JSON.parse(localStorage.getItem("canvasData")))),localStorage.getItem("canvasStyle")&&this.$store.commit("setCanvasStyle",JSON.parse(localStorage.getItem("canvasStyle")))},handleDrop(e){e.preventDefault(),e.stopPropagation();const t=e.dataTransfer.getData("index"),n=this.editor.getBoundingClientRect();if(t){const o=(0,k.A4)(de.Ay[t]);o.style.top=e.clientY-n.y,o.style.left=e.clientX-n.x,o.id=(0,Ye.A)(),(0,Dn.N)(o),this.$store.commit("addComponent",{component:o}),this.$store.commit("recordSnapshot")}},handleDragOver(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"},handleMouseDown(e){e.stopPropagation(),this.$store.commit("setClickComponentStatus",!1),this.$store.commit("setInEditorStatus",!0)},deselectCurComponent(e){this.isClickComponent||this.$store.commit("setCurComponent",{component:null,index:null}),2!=e.button&&this.$store.commit("hideContextMenu")},isShowLeft(){let e=!this.leftList;this.leftList=e},isShowRight(){this.$store.commit("isShowRightList")}}},eo=Zn,to=(0,$.A)(eo,o,i,!1,null,null,null),no=to.exports},86:function(e,t,n){e=n.nmd(e),ace.define("ace/snippets",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/range_list","ace/keyboard/hash_handler","ace/tokenizer","ace/clipboard","ace/editor"],(function(e,t,n){"use strict";function o(e){var t=(new Date).toLocaleString("en-us",e);return 1==t.length?"0"+t:t}var i=e("./lib/dom"),r=e("./lib/oop"),s=e("./lib/event_emitter").EventEmitter,a=e("./lib/lang"),c=e("./range").Range,l=e("./range_list").RangeList,h=e("./keyboard/hash_handler").HashHandler,p=e("./tokenizer").Tokenizer,u=e("./clipboard"),d={CURRENT_WORD:function(e){return e.session.getTextRange(e.session.getWordRange())},SELECTION:function(e,t,n){var o=e.session.getTextRange();return n?o.replace(/\n\r?([ \t]*\S)/g,"\n"+n+"$1"):o},CURRENT_LINE:function(e){return e.session.getLine(e.getCursorPosition().row)},PREV_LINE:function(e){return e.session.getLine(e.getCursorPosition().row-1)},LINE_INDEX:function(e){return e.getCursorPosition().row},LINE_NUMBER:function(e){return e.getCursorPosition().row+1},SOFT_TABS:function(e){return e.session.getUseSoftTabs()?"YES":"NO"},TAB_SIZE:function(e){return e.session.getTabSize()},CLIPBOARD:function(e){return u.getText&&u.getText()},FILENAME:function(e){return/[^/\\]*$/.exec(this.FILEPATH(e))[0]},FILENAME_BASE:function(e){return/[^/\\]*$/.exec(this.FILEPATH(e))[0].replace(/\.[^.]*$/,"")},DIRECTORY:function(e){return this.FILEPATH(e).replace(/[^/\\]*$/,"")},FILEPATH:function(e){return"/not implemented.txt"},WORKSPACE_NAME:function(){return"Unknown"},FULLNAME:function(){return"Unknown"},BLOCK_COMMENT_START:function(e){var t=e.session.$mode||{};return t.blockComment&&t.blockComment.start||""},BLOCK_COMMENT_END:function(e){var t=e.session.$mode||{};return t.blockComment&&t.blockComment.end||""},LINE_COMMENT:function(e){var t=e.session.$mode||{};return t.lineCommentStart||""},CURRENT_YEAR:o.bind(null,{year:"numeric"}),CURRENT_YEAR_SHORT:o.bind(null,{year:"2-digit"}),CURRENT_MONTH:o.bind(null,{month:"numeric"}),CURRENT_MONTH_NAME:o.bind(null,{month:"long"}),CURRENT_MONTH_NAME_SHORT:o.bind(null,{month:"short"}),CURRENT_DATE:o.bind(null,{day:"2-digit"}),CURRENT_DAY_NAME:o.bind(null,{weekday:"long"}),CURRENT_DAY_NAME_SHORT:o.bind(null,{weekday:"short"}),CURRENT_HOUR:o.bind(null,{hour:"2-digit",hour12:!1}),CURRENT_MINUTE:o.bind(null,{minute:"2-digit"}),CURRENT_SECOND:o.bind(null,{second:"2-digit"})};d.SELECTED_TEXT=d.SELECTION;var m=function(){function e(){this.snippetMap={},this.snippetNameMap={},this.variables=d}return e.prototype.getTokenizer=function(){return e.$tokenizer||this.createTokenizer()},e.prototype.createTokenizer=function(){function t(e){return e=e.substr(1),/^\d+$/.test(e)?[{tabstopId:parseInt(e,10)}]:[{text:e}]}function n(e){return"(?:[^\\\\"+e+"]|\\\\.)"}var o={regex:"/("+n("/")+"+)/",onMatch:function(e,t,n){var o=n[0];return o.fmtString=!0,o.guard=e.slice(1,-1),o.flag="",""},next:"formatString"};return e.$tokenizer=new p({start:[{regex:/\\./,onMatch:function(e,t,n){var o=e[1];return("}"==o&&n.length||-1!="`$\\".indexOf(o))&&(e=o),[e]}},{regex:/}/,onMatch:function(e,t,n){return[n.length?n.shift():e]}},{regex:/\$(?:\d+|\w+)/,onMatch:t},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(e,n,o){var i=t(e.substr(1));return o.unshift(i[0]),i},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+n("\\|")+"*\\|",onMatch:function(e,t,n){var o=e.slice(1,-1).replace(/\\[,|\\]|,/g,(function(e){return 2==e.length?e[1]:"\0"})).split("\0").map((function(e){return{value:e}}));return n[0].choices=o,[o[0]]},next:"start"},o,{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:/:/,onMatch:function(e,t,n){return n.length&&n[0].expectElse?(n[0].expectElse=!1,n[0].ifEnd={elseEnd:n[0]},[n[0].ifEnd]):":"}},{regex:/\\./,onMatch:function(e,t,n){var o=e[1];return"}"==o&&n.length||-1!="`$\\".indexOf(o)?e=o:"n"==o?e="\n":"t"==o?e="\t":-1!="ulULE".indexOf(o)&&(e={changeCase:o,local:o>"a"}),[e]}},{regex:"/\\w*}",onMatch:function(e,t,n){var o=n.shift();return o&&(o.flag=e.slice(1,-1)),this.next=o&&o.tabstopId?"start":"",[o||e]},next:"start"},{regex:/\$(?:\d+|\w+)/,onMatch:function(e,t,n){return[{text:e.slice(1)}]}},{regex:/\${\w+/,onMatch:function(e,t,n){var o={text:e.slice(2)};return n.unshift(o),[o]},next:"formatStringVar"},{regex:/\n/,token:"newline",merge:!1},{regex:/}/,onMatch:function(e,t,n){var o=n.shift();return this.next=o&&o.tabstopId?"start":"",[o||e]},next:"start"}],formatStringVar:[{regex:/:\/\w+}/,onMatch:function(e,t,n){var o=n[0];return o.formatFunction=e.slice(2,-1),[n.shift()]},next:"formatString"},o,{regex:/:[\?\-+]?/,onMatch:function(e,t,n){"+"==e[1]&&(n[0].ifEnd=n[0]),"?"==e[1]&&(n[0].expectElse=!0)},next:"formatString"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"formatString"}]}),e.$tokenizer},e.prototype.tokenizeTmSnippet=function(e,t){return this.getTokenizer().getLineTokens(e,t).tokens.map((function(e){return e.value||e}))},e.prototype.getVariableValue=function(e,t,n){if(/^\d+$/.test(t))return(this.variables.__||{})[t]||"";if(/^[A-Z]\d+$/.test(t))return(this.variables[t[0]+"__"]||{})[t.substr(1)]||"";if(t=t.replace(/^TM_/,""),!this.variables.hasOwnProperty(t))return"";var o=this.variables[t];return"function"==typeof o&&(o=this.variables[t](e,t,n)),null==o?"":o},e.prototype.tmStrFormat=function(e,t,n){if(!t.fmt)return e;var o=t.flag||"",i=t.guard;i=new RegExp(i,o.replace(/[^gim]/g,""));var r="string"==typeof t.fmt?this.tokenizeTmSnippet(t.fmt,"formatString"):t.fmt,s=this,a=e.replace(i,(function(){var e=s.variables.__;s.variables.__=[].slice.call(arguments);for(var t=s.resolveVariables(r,n),o="E",i=0;i<t.length;i++){var a=t[i];if("object"==typeof a)if(t[i]="",a.changeCase&&a.local){var c=t[i+1];c&&"string"==typeof c&&("u"==a.changeCase?t[i]=c[0].toUpperCase():t[i]=c[0].toLowerCase(),t[i+1]=c.substr(1))}else a.changeCase&&(o=a.changeCase);else"U"==o?t[i]=a.toUpperCase():"L"==o&&(t[i]=a.toLowerCase())}return s.variables.__=e,t.join("")}));return a},e.prototype.tmFormatFunction=function(e,t,n){return"upcase"==t.formatFunction?e.toUpperCase():"downcase"==t.formatFunction?e.toLowerCase():e},e.prototype.resolveVariables=function(e,t){function n(t){var n=e.indexOf(t,s+1);-1!=n&&(s=n)}for(var o=[],i="",r=!0,s=0;s<e.length;s++){var a=e[s];if("string"!=typeof a){if(a){if(r=!1,a.fmtString){var c=e.indexOf(a,s+1);-1==c&&(c=e.length),a.fmt=e.slice(s+1,c),s=c}if(a.text){var l=this.getVariableValue(t,a.text,i)+"";a.fmtString&&(l=this.tmStrFormat(l,a,t)),a.formatFunction&&(l=this.tmFormatFunction(l,a,t)),l&&!a.ifEnd?(o.push(l),n(a)):!l&&a.ifEnd&&n(a.ifEnd)}else a.elseEnd?n(a.elseEnd):(null!=a.tabstopId||null!=a.changeCase)&&o.push(a)}}else o.push(a),"\n"==a?(r=!0,i=""):r&&(i=/^\t*/.exec(a)[0],r=/\S/.test(a))}return o},e.prototype.getDisplayTextForSnippet=function(e,t){var n=f.call(this,e,t);return n.text},e.prototype.insertSnippetForSelection=function(e,t,n){void 0===n&&(n={});var o=f.call(this,e,t,n),i=e.getSelectionRange(),r=e.session.replace(i,o.text),s=new g(e),a=e.inVirtualSelectionMode&&e.selection.index;s.addTabstops(o.tabstops,i.start,r,a)},e.prototype.insertSnippet=function(e,t,n){void 0===n&&(n={});var o=this;if(e.inVirtualSelectionMode)return o.insertSnippetForSelection(e,t,n);e.forEachSelection((function(){o.insertSnippetForSelection(e,t,n)}),null,{keepOrder:!0}),e.tabstopManager&&e.tabstopManager.tabNext()},e.prototype.$getScope=function(e){var t=e.session.$mode.$id||"";if(t=t.split("/").pop(),"html"===t||"php"===t){"php"===t&&!e.session.$mode.inlinePhp&&(t="html");var n=e.getCursorPosition(),o=e.session.getState(n.row);"object"==typeof o&&(o=o[0]),o.substring&&("js-"==o.substring(0,3)?t="javascript":"css-"==o.substring(0,4)?t="css":"php-"==o.substring(0,4)&&(t="php"))}return t},e.prototype.getActiveScopes=function(e){var t=this.$getScope(e),n=[t],o=this.snippetMap;return o[t]&&o[t].includeScopes&&n.push.apply(n,o[t].includeScopes),n.push("_"),n},e.prototype.expandWithTab=function(e,t){var n=this,o=e.forEachSelection((function(){return n.expandSnippetForSelection(e,t)}),null,{keepOrder:!0});return o&&e.tabstopManager&&e.tabstopManager.tabNext(),o},e.prototype.expandSnippetForSelection=function(e,t){var n,o=e.getCursorPosition(),i=e.session.getLine(o.row),r=i.substring(0,o.column),s=i.substr(o.column),a=this.snippetMap;return this.getActiveScopes(e).some((function(e){var t=a[e];return t&&(n=this.findMatchingSnippet(t,r,s)),!!n}),this),!!n&&(t&&t.dryRun||(e.session.doc.removeInLine(o.row,o.column-n.replaceBefore.length,o.column+n.replaceAfter.length),this.variables.M__=n.matchBefore,this.variables.T__=n.matchAfter,this.insertSnippetForSelection(e,n.content),this.variables.M__=this.variables.T__=null),!0)},e.prototype.findMatchingSnippet=function(e,t,n){for(var o=e.length;o--;){var i=e[o];if((!i.startRe||i.startRe.test(t))&&((!i.endRe||i.endRe.test(n))&&(i.startRe||i.endRe)))return i.matchBefore=i.startRe?i.startRe.exec(t):[""],i.matchAfter=i.endRe?i.endRe.exec(n):[""],i.replaceBefore=i.triggerRe?i.triggerRe.exec(t)[0]:"",i.replaceAfter=i.endTriggerRe?i.endTriggerRe.exec(n)[0]:"",i}},e.prototype.register=function(e,t){function n(e){return e&&!/^\^?\(.*\)\$?$|^\\b$/.test(e)&&(e="(?:"+e+")"),e||""}function o(e,t,o){return e=n(e),t=n(t),o?(e=t+e,e&&"$"!=e[e.length-1]&&(e+="$")):(e+=t,e&&"^"!=e[0]&&(e="^"+e)),new RegExp(e)}function i(e){e.scope||(e.scope=t||"_"),t=e.scope,r[t]||(r[t]=[],s[t]={});var n=s[t];if(e.name){var i=n[e.name];i&&c.unregister(i),n[e.name]=e}r[t].push(e),e.prefix&&(e.tabTrigger=e.prefix),!e.content&&e.body&&(e.content=Array.isArray(e.body)?e.body.join("\n"):e.body),e.tabTrigger&&!e.trigger&&(!e.guard&&/^\w/.test(e.tabTrigger)&&(e.guard="\\b"),e.trigger=a.escapeRegExp(e.tabTrigger)),(e.trigger||e.guard||e.endTrigger||e.endGuard)&&(e.startRe=o(e.trigger,e.guard,!0),e.triggerRe=new RegExp(e.trigger),e.endRe=o(e.endTrigger,e.endGuard,!0),e.endTriggerRe=new RegExp(e.endTrigger))}var r=this.snippetMap,s=this.snippetNameMap,c=this;e||(e=[]),Array.isArray(e)?e.forEach(i):Object.keys(e).forEach((function(t){i(e[t])})),this._signal("registerSnippets",{scope:t})},e.prototype.unregister=function(e,t){function n(e){var n=i[e.scope||t];if(n&&n[e.name]){delete n[e.name];var r=o[e.scope||t],s=r&&r.indexOf(e);s>=0&&r.splice(s,1)}}var o=this.snippetMap,i=this.snippetNameMap;e.content?n(e):Array.isArray(e)&&e.forEach(n)},e.prototype.parseSnippetFile=function(e){e=e.replace(/\r/g,"");var t,n=[],o={},i=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm;while(t=i.exec(e)){if(t[1])try{o=JSON.parse(t[1]),n.push(o)}catch(s){}if(t[4])o.content=t[4].replace(/^\t/gm,""),n.push(o),o={};else{var r=t[2],a=t[3];if("regex"==r){var c=/\/((?:[^\/\\]|\\.)*)|$/g;o.guard=c.exec(a)[1],o.trigger=c.exec(a)[1],o.endTrigger=c.exec(a)[1],o.endGuard=c.exec(a)[1]}else"snippet"==r?(o.tabTrigger=a.match(/^\S*/)[0],o.name||(o.name=a)):r&&(o[r]=a)}}return n},e.prototype.getSnippetByName=function(e,t){var n,o=this.snippetNameMap;return this.getActiveScopes(t).some((function(t){var i=o[t];return i&&(n=i[e]),!!n}),this),n},e}();r.implement(m.prototype,s);var f=function(e,t,n){function o(e){for(var t=[],n=0;n<e.length;n++){var o=e[n];if("object"==typeof o){if(h[o.tabstopId])continue;var i=e.lastIndexOf(o,n-1);o=t[i]||{tabstopId:o.tabstopId}}t[n]=o}return t}void 0===n&&(n={});var i=e.getCursorPosition(),r=e.session.getLine(i.row),s=e.session.getTabString(),a=r.match(/^\s*/)[0];i.column<a.length&&(a=a.slice(0,i.column)),t=t.replace(/\r/g,"");var c=this.tokenizeTmSnippet(t);c=this.resolveVariables(c,e),c=c.map((function(e){return"\n"!=e||n.excludeExtraIndent?"string"==typeof e?e.replace(/\t/g,s):e:e+a}));var l=[];c.forEach((function(e,t){if("object"==typeof e){var n=e.tabstopId,o=l[n];if(o||(o=l[n]=[],o.index=n,o.value="",o.parents={}),-1===o.indexOf(e)){e.choices&&!o.choices&&(o.choices=e.choices),o.push(e);var i=c.indexOf(e,t+1);if(-1!==i){var r=c.slice(t+1,i),s=r.some((function(e){return"object"==typeof e}));s&&!o.value?o.value=r:r.length&&(!o.value||"string"!=typeof o.value)&&(o.value=r.join(""))}}}})),l.forEach((function(e){e.length=0}));for(var h={},p=0;p<c.length;p++){var u=c[p];if("object"==typeof u){var d=u.tabstopId,m=l[d],f=c.indexOf(u,p+1);if(h[d])h[d]===u&&(delete h[d],Object.keys(h).forEach((function(e){m.parents[e]=!0})));else{h[d]=u;var g=m.value;"string"!=typeof g?g=o(g):u.fmt&&(g=this.tmStrFormat(g,u,e)),c.splice.apply(c,[p+1,Math.max(0,f-p)].concat(g,u)),-1===m.indexOf(u)&&m.push(u)}}}var v=0,b=0,y="";return c.forEach((function(e){if("string"==typeof e){var t=e.split("\n");t.length>1?(b=t[t.length-1].length,v+=t.length-1):b+=e.length,y+=e}else e&&(e.start?e.end={row:v,column:b}:e.start={row:v,column:b})})),{text:y,tabstops:l,tokens:c}},g=function(){function e(e){if(this.index=0,this.ranges=[],this.tabstops=[],e.tabstopManager)return e.tabstopManager;e.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=a.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(e)}return e.prototype.attach=function(e){this.$openTabstops=null,this.selectedTabstop=null,this.editor=e,this.session=e.session,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},e.prototype.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges.length=0,this.tabstops.length=0,this.selectedTabstop=null,this.editor.off("change",this.$onChange),this.editor.off("changeSelection",this.$onChangeSelection),this.editor.off("changeSession",this.$onChangeSession),this.editor.commands.off("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.session=null,this.editor=null},e.prototype.onChange=function(e){for(var t="r"==e.action[0],n=this.selectedTabstop||{},o=n.parents||{},i=this.tabstops.slice(),r=0;r<i.length;r++){var s=i[r],a=s==n||o[s.index];if(s.rangeList.$bias=a?0:1,"remove"==e.action&&s!==n){var c=s.parents&&s.parents[n.index],l=s.rangeList.pointIndex(e.start,c);l=l<0?-l-1:l+1;var h=s.rangeList.pointIndex(e.end,c);h=h<0?-h-1:h-1;for(var p=s.rangeList.ranges.slice(l,h),u=0;u<p.length;u++)this.removeRange(p[u])}s.rangeList.$onChange(e)}var d=this.session;!this.$inChange&&t&&1==d.getLength()&&!d.getValue()&&this.detach()},e.prototype.updateLinkedFields=function(){var e=this.selectedTabstop;if(e&&e.hasLinkedRanges&&e.firstNonLinked){this.$inChange=!0;for(var n=this.session,o=n.getTextRange(e.firstNonLinked),i=0;i<e.length;i++){var r=e[i];if(r.linked){var s=r.original,a=t.snippetManager.tmStrFormat(o,s,this.editor);n.replace(r,a)}}this.$inChange=!1}},e.prototype.onAfterExec=function(e){e.command&&!e.command.readOnly&&this.updateLinkedFields()},e.prototype.onChangeSelection=function(){if(this.editor){for(var e=this.editor.selection.lead,t=this.editor.selection.anchor,n=this.editor.selection.isEmpty(),o=0;o<this.ranges.length;o++)if(!this.ranges[o].linked){var i=this.ranges[o].contains(e.row,e.column),r=n||this.ranges[o].contains(t.row,t.column);if(i&&r)return}this.detach()}},e.prototype.onChangeSession=function(){this.detach()},e.prototype.tabNext=function(e){var t=this.tabstops.length,n=this.index+(e||1);n=Math.min(Math.max(n,1),t),n==t&&(n=0),this.selectTabstop(n),this.updateTabstopMarkers(),0===n&&this.detach()},e.prototype.selectTabstop=function(e){this.$openTabstops=null;var t=this.tabstops[this.index];if(t&&this.addTabstopMarkers(t),this.index=e,t=this.tabstops[this.index],t&&t.length){this.selectedTabstop=t;var n=t.firstNonLinked||t;if(t.choices&&(n.cursor=n.start),this.editor.inVirtualSelectionMode)this.editor.selection.fromOrientedRange(n);else{var o=this.editor.multiSelect;o.toSingleRange(n);for(var i=0;i<t.length;i++)t.hasLinkedRanges&&t[i].linked||o.addRange(t[i].clone(),!0)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler),this.selectedTabstop&&this.selectedTabstop.choices&&this.editor.execCommand("startAutocomplete",{matches:this.selectedTabstop.choices})}},e.prototype.addTabstops=function(e,t,n){var o=this.useLink||!this.editor.getOption("enableMultiselect");if(this.$openTabstops||(this.$openTabstops=[]),!e[0]){var i=c.fromPoints(n,n);b(i.start,t),b(i.end,t),e[0]=[i],e[0].index=0}var r=this.index,s=[r+1,0],a=this.ranges,h=this.snippetId=(this.snippetId||0)+1;e.forEach((function(e,n){var i=this.$openTabstops[n]||e;i.snippetId=h;for(var r=0;r<e.length;r++){var p=e[r],u=c.fromPoints(p.start,p.end||p.start);v(u.start,t),v(u.end,t),u.original=p,u.tabstop=i,a.push(u),i!=e?i.unshift(u):i[r]=u,p.fmtString||i.firstNonLinked&&o?(u.linked=!0,i.hasLinkedRanges=!0):i.firstNonLinked||(i.firstNonLinked=u)}i.firstNonLinked||(i.hasLinkedRanges=!1),i===e&&(s.push(i),this.$openTabstops[n]=i),this.addTabstopMarkers(i),i.rangeList=i.rangeList||new l,i.rangeList.$bias=0,i.rangeList.addList(i)}),this),s.length>2&&(this.tabstops.length&&s.push(s.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,s))},e.prototype.addTabstopMarkers=function(e){var t=this.session;e.forEach((function(e){e.markerId||(e.markerId=t.addMarker(e,"ace_snippet-marker","text"))}))},e.prototype.removeTabstopMarkers=function(e){var t=this.session;e.forEach((function(e){t.removeMarker(e.markerId),e.markerId=null}))},e.prototype.updateTabstopMarkers=function(){if(this.selectedTabstop){var e=this.selectedTabstop.snippetId;0===this.selectedTabstop.index&&e--,this.tabstops.forEach((function(t){t.snippetId===e?this.addTabstopMarkers(t):this.removeTabstopMarkers(t)}),this)}},e.prototype.removeRange=function(e){var t=e.tabstop.indexOf(e);-1!=t&&e.tabstop.splice(t,1),t=this.ranges.indexOf(e),-1!=t&&this.ranges.splice(t,1),t=e.tabstop.rangeList.ranges.indexOf(e),-1!=t&&e.tabstop.splice(t,1),this.session.removeMarker(e.markerId),e.tabstop.length||(t=this.tabstops.indexOf(e.tabstop),-1!=t&&this.tabstops.splice(t,1),this.tabstops.length||this.detach())},e}();g.prototype.keyboardHandler=new h,g.prototype.keyboardHandler.bindKeys({Tab:function(e){t.snippetManager&&t.snippetManager.expandWithTab(e)||(e.tabstopManager.tabNext(1),e.renderer.scrollCursorIntoView())},"Shift-Tab":function(e){e.tabstopManager.tabNext(-1),e.renderer.scrollCursorIntoView()},Esc:function(e){e.tabstopManager.detach()}});var v=function(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row},b=function(e,t){e.row==t.row&&(e.column-=t.column),e.row-=t.row};i.importCssString("\n.ace_snippet-marker {\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n    background: rgba(194, 193, 208, 0.09);\n    border: 1px dotted rgba(211, 208, 235, 0.62);\n    position: absolute;\n}","snippets.css",!1),t.snippetManager=new m;var y=e("./editor").Editor;(function(){this.insertSnippet=function(e,n){return t.snippetManager.insertSnippet(this,e,n)},this.expandSnippet=function(e){return t.snippetManager.expandWithTab(this,e)}}).call(y.prototype)})),ace.define("ace/autocomplete/popup",["require","exports","module","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom","ace/config","ace/lib/useragent"],(function(e,t,n){"use strict";var o=e("../virtual_renderer").VirtualRenderer,i=e("../editor").Editor,r=e("../range").Range,s=e("../lib/event"),a=e("../lib/lang"),c=e("../lib/dom"),l=e("../config").nls,h=e("./../lib/useragent"),p=function(e){return"suggest-aria-id:".concat(e)},u=h.isSafari?"menu":"listbox",d=h.isSafari?"menuitem":"option",m=h.isSafari?"aria-current":"aria-selected",f=function(e){var t=new o(e);t.$maxLines=4;var n=new i(t);return n.setHighlightActiveLine(!1),n.setShowPrintMargin(!1),n.renderer.setShowGutter(!1),n.renderer.setHighlightGutterLine(!1),n.$mouseHandler.$focusTimeout=0,n.$highlightTagPending=!0,n},g=function(){function e(e){var t=c.createElement("div"),n=f(t);e&&e.appendChild(t),t.style.display="none",n.renderer.content.style.cursor="default",n.renderer.setStyle("ace_autocomplete"),n.renderer.$textLayer.element.setAttribute("role",u),n.renderer.$textLayer.element.setAttribute("aria-roledescription",l("autocomplete.popup.aria-roledescription","Autocomplete suggestions")),n.renderer.$textLayer.element.setAttribute("aria-label",l("autocomplete.popup.aria-label","Autocomplete suggestions")),n.renderer.textarea.setAttribute("aria-hidden","true"),n.setOption("displayIndentGuides",!1),n.setOption("dragDelay",150);var o=function(){};n.focus=o,n.$isFocused=!0,n.renderer.$cursorLayer.restartTimer=o,n.renderer.$cursorLayer.element.style.opacity="0",n.renderer.$maxLines=8,n.renderer.$keepTextAreaAtCursor=!1,n.setHighlightActiveLine(!1),n.session.highlight(""),n.session.$searchHighlight.clazz="ace_highlight-marker",n.on("mousedown",(function(e){var t=e.getDocumentPosition();n.selection.moveToPosition(t),g.start.row=g.end.row=t.row,e.stop()}));var i,h=new r(-1,0,-1,1/0),g=new r(-1,0,-1,1/0);g.id=n.session.addMarker(g,"ace_active-line","fullLine"),n.setSelectOnHover=function(e){e?h.id&&(n.session.removeMarker(h.id),h.id=null):h.id=n.session.addMarker(h,"ace_line-hover","fullLine")},n.setSelectOnHover(!1),n.on("mousemove",(function(e){if(i){if(i.x!=e.x||i.y!=e.y){i=e,i.scrollTop=n.renderer.scrollTop,n.isMouseOver=!0;var t=i.getDocumentPosition().row;h.start.row!=t&&(h.id||n.setRow(t),b(t))}}else i=e})),n.renderer.on("beforeRender",(function(){if(i&&-1!=h.start.row){i.$pos=null;var e=i.getDocumentPosition().row;h.id||n.setRow(e),b(e,!0)}})),n.renderer.on("afterRender",(function(){var e=n.getRow(),t=n.renderer.$textLayer,o=t.element.childNodes[e-t.config.firstRow],i=document.activeElement;if(o!==n.selectedNode&&n.selectedNode&&(c.removeCssClass(n.selectedNode,"ace_selected"),i.removeAttribute("aria-activedescendant"),n.selectedNode.removeAttribute(m),n.selectedNode.removeAttribute("id")),n.selectedNode=o,o){c.addCssClass(o,"ace_selected");var r=p(e);o.id=r,t.element.setAttribute("aria-activedescendant",r),i.setAttribute("aria-activedescendant",r),o.setAttribute("role",d),o.setAttribute("aria-roledescription",l("autocomplete.popup.item.aria-roledescription","item")),o.setAttribute("aria-label",n.getData(e).caption||n.getData(e).value),o.setAttribute("aria-setsize",n.data.length),o.setAttribute("aria-posinset",e+1),o.setAttribute("aria-describedby","doc-tooltip"),o.setAttribute(m,"true")}}));var v=function(){b(-1)},b=function(e,t){e!==h.start.row&&(h.start.row=h.end.row=e,t||n.session._emit("changeBackMarker"),n._emit("changeHoverMarker"))};n.getHoveredRow=function(){return h.start.row},s.addListener(n.container,"mouseout",(function(){n.isMouseOver=!1,v()})),n.on("hide",v),n.on("changeSelection",v),n.session.doc.getLength=function(){return n.data.length},n.session.doc.getLine=function(e){var t=n.data[e];return"string"==typeof t?t:t&&t.value||""};var y=n.session.bgTokenizer;return y.$tokenizeRow=function(e){function t(e,t){e&&i.push({type:(o.className||"")+(t||""),value:e})}var o=n.data[e],i=[];if(!o)return i;"string"==typeof o&&(o={value:o});for(var r=o.caption||o.value||o.name,s=r.toLowerCase(),a=(n.filterText||"").toLowerCase(),c=0,l=0,h=0;h<=a.length;h++)if(h!=l&&(o.matchMask&1<<h||h==a.length)){var p=a.slice(l,h);l=h;var u=s.indexOf(p,c);if(-1==u)continue;t(r.slice(c,u),""),c=u+p.length,t(r.slice(u,c),"completion-highlight")}return t(r.slice(c,r.length),""),i.push({type:"completion-spacer",value:" "}),o.meta&&i.push({type:"completion-meta",value:o.meta}),o.message&&i.push({type:"completion-message",value:o.message}),i},y.$updateOnChange=o,y.start=o,n.session.$computeWidth=function(){return this.screenWidth=0},n.isOpen=!1,n.isTopdown=!1,n.autoSelect=!0,n.filterText="",n.isMouseOver=!1,n.data=[],n.setData=function(e,t){n.filterText=t||"",n.setValue(a.stringRepeat("\n",e.length),-1),n.data=e||[],n.setRow(0)},n.getData=function(e){return n.data[e]},n.getRow=function(){return g.start.row},n.setRow=function(e){e=Math.max(this.autoSelect?0:-1,Math.min(this.data.length-1,e)),g.start.row!=e&&(n.selection.clearSelection(),g.start.row=g.end.row=e||0,n.session._emit("changeBackMarker"),n.moveCursorTo(e||0,0),n.isOpen&&n._signal("select"))},n.on("changeSelection",(function(){n.isOpen&&n.setRow(n.selection.lead.row),n.renderer.scrollCursorIntoView()})),n.hide=function(){this.container.style.display="none",n.anchorPos=null,n.anchor=null,n.isOpen&&(n.isOpen=!1,this._signal("hide"))},n.tryShow=function(e,t,o,r){if(!r&&n.isOpen&&n.anchorPos&&n.anchor&&n.anchorPos.top===e.top&&n.anchorPos.left===e.left&&n.anchor===o)return!0;var s=this.container,a=window.innerHeight,c=window.innerWidth,l=this.renderer,h=l.$maxLines*t*1.4,p={top:0,bottom:0,left:0},u=a-e.top-3*this.$borderSize-t,d=e.top-3*this.$borderSize;o||(o=d<=u||u>=h?"bottom":"top"),"top"===o?(p.bottom=e.top-this.$borderSize,p.top=p.bottom-h):"bottom"===o&&(p.top=e.top+t+this.$borderSize,p.bottom=p.top+h);var m=p.top>=0&&p.bottom<=a;if(!r&&!m)return!1;l.$maxPixelHeight=m?null:"top"===o?d:u,"top"===o?(s.style.top="",s.style.bottom=a-p.bottom+"px",n.isTopdown=!1):(s.style.top=p.top+"px",s.style.bottom="",n.isTopdown=!0),s.style.display="";var f=e.left;return f+s.offsetWidth>c&&(f=c-s.offsetWidth),s.style.left=f+"px",s.style.right="",n.isOpen||(n.isOpen=!0,this._signal("show"),i=null),n.anchorPos=e,n.anchor=o,!0},n.show=function(e,t,n){this.tryShow(e,t,n?"bottom":void 0,!0)},n.goTo=function(e){var t=this.getRow(),n=this.session.getLength()-1;switch(e){case"up":t=t<=0?n:t-1;break;case"down":t=t>=n?-1:t+1;break;case"start":t=0;break;case"end":t=n}this.setRow(t)},n.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},n.$imageSize=0,n.$borderSize=1,n}return e}();c.importCssString('\n.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {\n    background-color: #CAD6FA;\n    z-index: 1;\n}\n.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {\n    background-color: #3a674e;\n}\n.ace_editor.ace_autocomplete .ace_line-hover {\n    border: 1px solid #abbffe;\n    margin-top: -1px;\n    background: rgba(233,233,253,0.4);\n    position: absolute;\n    z-index: 2;\n}\n.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {\n    border: 1px solid rgba(109, 150, 13, 0.8);\n    background: rgba(58, 103, 78, 0.62);\n}\n.ace_completion-meta {\n    opacity: 0.5;\n    margin-left: 0.9em;\n}\n.ace_completion-message {\n    margin-left: 0.9em;\n    color: blue;\n}\n.ace_editor.ace_autocomplete .ace_completion-highlight{\n    color: #2d69c7;\n}\n.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{\n    color: #93ca12;\n}\n.ace_editor.ace_autocomplete {\n    width: 300px;\n    z-index: 200000;\n    border: 1px lightgray solid;\n    position: fixed;\n    box-shadow: 2px 3px 5px rgba(0,0,0,.2);\n    line-height: 1.4;\n    background: #fefefe;\n    color: #111;\n}\n.ace_dark.ace_editor.ace_autocomplete {\n    border: 1px #484747 solid;\n    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);\n    line-height: 1.4;\n    background: #25282c;\n    color: #c1c1c1;\n}\n.ace_autocomplete .ace_text-layer  {\n    width: calc(100% - 8px);\n}\n.ace_autocomplete .ace_line {\n    display: flex;\n    align-items: center;\n}\n.ace_autocomplete .ace_line > * {\n    min-width: 0;\n    flex: 0 0 auto;\n}\n.ace_autocomplete .ace_line .ace_ {\n    flex: 0 1 auto;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n.ace_autocomplete .ace_completion-spacer {\n    flex: 1;\n}\n.ace_autocomplete.ace_loading:after  {\n    content: "";\n    position: absolute;\n    top: 0px;\n    height: 2px;\n    width: 8%;\n    background: blue;\n    z-index: 100;\n    animation: ace_progress 3s infinite linear;\n    animation-delay: 300ms;\n    transform: translateX(-100%) scaleX(1);\n}\n@keyframes ace_progress {\n    0% { transform: translateX(-100%) scaleX(1) }\n    50% { transform: translateX(625%) scaleX(2) } \n    100% { transform: translateX(1500%) scaleX(3) } \n}\n@media (prefers-reduced-motion) {\n    .ace_autocomplete.ace_loading:after {\n        transform: translateX(625%) scaleX(2);\n        animation: none;\n     }\n}\n',"autocompletion.css",!1),t.AcePopup=g,t.$singleLineEditor=f,t.getAriaId=p})),ace.define("ace/autocomplete/inline_screenreader",["require","exports","module"],(function(e,t,n){"use strict";var o=function(){function e(e){this.editor=e,this.screenReaderDiv=document.createElement("div"),this.screenReaderDiv.classList.add("ace_screenreader-only"),this.editor.container.appendChild(this.screenReaderDiv)}return e.prototype.setScreenReaderContent=function(e){!this.popup&&this.editor.completer&&this.editor.completer.popup&&(this.popup=this.editor.completer.popup,this.popup.renderer.on("afterRender",function(){var e=this.popup.getRow(),t=this.popup.renderer.$textLayer,n=t.element.childNodes[e-t.config.firstRow];if(n){for(var o="doc-tooltip ",i=0;i<this._lines.length;i++)o+="ace-inline-screenreader-line-".concat(i," ");n.setAttribute("aria-describedby",o)}}.bind(this)));while(this.screenReaderDiv.firstChild)this.screenReaderDiv.removeChild(this.screenReaderDiv.firstChild);this._lines=e.split(/\r\n|\r|\n/);var t=this.createCodeBlock();this.screenReaderDiv.appendChild(t)},e.prototype.destroy=function(){this.screenReaderDiv.remove()},e.prototype.createCodeBlock=function(){var e=document.createElement("pre");e.setAttribute("id","ace-inline-screenreader");for(var t=0;t<this._lines.length;t++){var n=document.createElement("code");n.setAttribute("id","ace-inline-screenreader-line-".concat(t));var o=document.createTextNode(this._lines[t]);n.appendChild(o),e.appendChild(n)}return e},e}();t.AceInlineScreenReader=o})),ace.define("ace/autocomplete/inline",["require","exports","module","ace/snippets","ace/autocomplete/inline_screenreader"],(function(e,t,n){"use strict";var o=e("../snippets").snippetManager,i=e("./inline_screenreader").AceInlineScreenReader,r=function(){function e(){this.editor=null}return e.prototype.show=function(e,t,n){if(n=n||"",e&&this.editor&&this.editor!==e&&(this.hide(),this.editor=null,this.inlineScreenReader=null),!e||!t)return!1;this.inlineScreenReader||(this.inlineScreenReader=new i(e));var r=t.snippet?o.getDisplayTextForSnippet(e,t.snippet):t.value;return!(t.hideInlinePreview||!r||!r.startsWith(n))&&(this.editor=e,this.inlineScreenReader.setScreenReaderContent(r),r=r.slice(n.length),""===r?e.removeGhostText():e.setGhostText(r),!0)},e.prototype.isOpen=function(){return!!this.editor&&!!this.editor.renderer.$ghostText},e.prototype.hide=function(){return!!this.editor&&(this.editor.removeGhostText(),!0)},e.prototype.destroy=function(){this.hide(),this.editor=null,this.inlineScreenReader&&(this.inlineScreenReader.destroy(),this.inlineScreenReader=null)},e}();t.AceInline=r})),ace.define("ace/autocomplete/util",["require","exports","module"],(function(e,t,n){"use strict";t.parForEach=function(e,t,n){var o=0,i=e.length;0===i&&n();for(var r=0;r<i;r++)t(e[r],(function(e,t){o++,o===i&&n(e,t)}))};var o=/[a-zA-Z_0-9\$\-\u00A2-\u2000\u2070-\uFFFF]/;t.retrievePrecedingIdentifier=function(e,t,n){n=n||o;for(var i=[],r=t-1;r>=0;r--){if(!n.test(e[r]))break;i.push(e[r])}return i.reverse().join("")},t.retrieveFollowingIdentifier=function(e,t,n){n=n||o;for(var i=[],r=t;r<e.length;r++){if(!n.test(e[r]))break;i.push(e[r])}return i},t.getCompletionPrefix=function(e){var t,n=e.getCursorPosition(),o=e.session.getLine(n.row);return e.completers.forEach(function(e){e.identifierRegexps&&e.identifierRegexps.forEach(function(e){!t&&e&&(t=this.retrievePrecedingIdentifier(o,n.column,e))}.bind(this))}.bind(this)),t||this.retrievePrecedingIdentifier(o,n.column)},t.triggerAutocomplete=function(e,t){t=null==t?e.session.getPrecedingCharacter():t;return e.completers.some((function(e){if(e.triggerCharacters&&Array.isArray(e.triggerCharacters))return e.triggerCharacters.includes(t)}))}})),ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/inline","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/lang","ace/lib/dom","ace/snippets","ace/config","ace/lib/event","ace/lib/scroll"],(function(e,t,n){"use strict";var o=e("./keyboard/hash_handler").HashHandler,i=e("./autocomplete/popup").AcePopup,r=e("./autocomplete/inline").AceInline,s=e("./autocomplete/popup").getAriaId,a=e("./autocomplete/util"),c=e("./lib/lang"),l=e("./lib/dom"),h=e("./snippets").snippetManager,p=e("./config"),u=e("./lib/event"),d=e("./lib/scroll").preventParentScroll,m=function(e,t){t.completer&&t.completer.destroy()},f=function(){function e(){this.autoInsert=!1,this.autoSelect=!0,this.autoShown=!1,this.exactMatch=!1,this.inlineEnabled=!1,this.keyboardHandler=new o,this.keyboardHandler.bindKeys(this.commands),this.parentNode=null,this.setSelectOnHover=!1,this.hasSeen=new Set,this.showLoadingState=!1,this.stickySelectionDelay=500,this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.onLayoutChange=this.onLayoutChange.bind(this),this.changeTimer=c.delayedCall(function(){this.updateCompletions(!0)}.bind(this)),this.tooltipTimer=c.delayedCall(this.updateDocTooltip.bind(this),50),this.popupTimer=c.delayedCall(this.$updatePopupPosition.bind(this),50),this.stickySelectionTimer=c.delayedCall(function(){this.stickySelection=!0}.bind(this),this.stickySelectionDelay),this.$firstOpenTimer=c.delayedCall(function(){var t=this.completionProvider&&this.completionProvider.initialPosition;this.autoShown||this.popup&&this.popup.isOpen||!t||0===this.editor.completers.length||(this.completions=new v(e.completionsForLoading),this.openPopup(this.editor,t.prefix,!1),this.popup.renderer.setStyle("ace_loading",!0))}.bind(this),this.stickySelectionDelay)}return Object.defineProperty(e,"completionsForLoading",{get:function(){return[{caption:p.nls("autocomplete.loading","Loading..."),value:""}]},enumerable:!1,configurable:!0}),e.prototype.$init=function(){return this.popup=new i(this.parentNode||document.body||document.documentElement),this.popup.on("click",function(e){this.insertMatch(),e.stop()}.bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.$onPopupShow.bind(this)),this.popup.on("hide",this.$onHidePopup.bind(this)),this.popup.on("select",this.$onPopupChange.bind(this)),u.addListener(this.popup.container,"mouseout",this.mouseOutListener.bind(this)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup.renderer.on("afterRender",this.$onPopupRender.bind(this)),this.popup},e.prototype.$initInline=function(){if(this.inlineEnabled&&!this.inlineRenderer)return this.inlineRenderer=new r,this.inlineRenderer},e.prototype.getPopup=function(){return this.popup||this.$init()},e.prototype.$onHidePopup=function(){this.inlineRenderer&&this.inlineRenderer.hide(),this.hideDocTooltip(),this.stickySelectionTimer.cancel(),this.popupTimer.cancel(),this.stickySelection=!1},e.prototype.$seen=function(e){!this.hasSeen.has(e)&&e&&e.completer&&e.completer.onSeen&&"function"==typeof e.completer.onSeen&&(e.completer.onSeen(this.editor,e),this.hasSeen.add(e))},e.prototype.$onPopupChange=function(e){if(this.inlineRenderer&&this.inlineEnabled){var t=e?null:this.popup.getData(this.popup.getRow());if(this.$updateGhostText(t),this.popup.isMouseOver&&this.setSelectOnHover)return void this.tooltipTimer.call(null,null);this.popupTimer.schedule(),this.tooltipTimer.schedule()}else this.popupTimer.call(null,null),this.tooltipTimer.call(null,null)},e.prototype.$updateGhostText=function(e){var t=this.base.row,n=this.base.column,o=this.editor.getCursorPosition().column,i=this.editor.session.getLine(t).slice(n,o);this.inlineRenderer.show(this.editor,e,i)?this.$seen(e):this.inlineRenderer.hide()},e.prototype.$onPopupRender=function(){var e=this.inlineRenderer&&this.inlineEnabled;if(this.completions&&this.completions.filtered&&this.completions.filtered.length>0)for(var t=this.popup.getFirstVisibleRow();t<=this.popup.getLastVisibleRow();t++){var n=this.popup.getData(t);n&&(!e||n.hideInlinePreview)&&this.$seen(n)}},e.prototype.$onPopupShow=function(e){this.$onPopupChange(e),this.stickySelection=!1,this.stickySelectionDelay>=0&&this.stickySelectionTimer.schedule(this.stickySelectionDelay)},e.prototype.observeLayoutChanges=function(){if(!this.$elements&&this.editor){window.addEventListener("resize",this.onLayoutChange,{passive:!0}),window.addEventListener("wheel",this.mousewheelListener);var e=this.editor.container.parentNode,t=[];while(e)t.push(e),e.addEventListener("scroll",this.onLayoutChange,{passive:!0}),e=e.parentNode;this.$elements=t}},e.prototype.unObserveLayoutChanges=function(){var e=this;window.removeEventListener("resize",this.onLayoutChange,{passive:!0}),window.removeEventListener("wheel",this.mousewheelListener),this.$elements&&this.$elements.forEach((function(t){t.removeEventListener("scroll",e.onLayoutChange,{passive:!0})})),this.$elements=null},e.prototype.onLayoutChange=function(){if(!this.popup.isOpen)return this.unObserveLayoutChanges();this.$updatePopupPosition(),this.updateDocTooltip()},e.prototype.$updatePopupPosition=function(){var e=this.editor,t=e.renderer,n=t.layerConfig.lineHeight,o=t.$cursorLayer.getPixelPosition(this.base,!0);o.left-=this.popup.getTextLeftOffset();var i=e.container.getBoundingClientRect();o.top+=i.top-t.layerConfig.offset,o.left+=i.left-e.renderer.scrollLeft,o.left+=t.gutterWidth;var r={top:o.top,left:o.left};t.$ghostText&&t.$ghostTextWidget&&this.base.row===t.$ghostText.position.row&&(r.top+=t.$ghostTextWidget.el.offsetHeight);var s=e.container.getBoundingClientRect().bottom-n,a=s<r.top?{top:s,left:r.left}:r;this.popup.tryShow(a,n,"bottom")||this.popup.tryShow(o,n,"top")||this.popup.show(o,n)},e.prototype.openPopup=function(e,t,n){this.$firstOpenTimer.cancel(),this.popup||this.$init(),this.inlineEnabled&&!this.inlineRenderer&&this.$initInline(),this.popup.autoSelect=this.autoSelect,this.popup.setSelectOnHover(this.setSelectOnHover);var o,i=this.popup.getRow(),r=this.popup.data[i];this.popup.setData(this.completions.filtered,this.completions.filterText),this.editor.textInput.setAriaOptions&&this.editor.textInput.setAriaOptions({activeDescendant:s(this.popup.getRow()),inline:this.inlineEnabled}),e.keyBinding.addKeyboardHandler(this.keyboardHandler),this.stickySelection&&(o=this.popup.data.indexOf(r)),o&&-1!==o||(o=0),this.popup.setRow(this.autoSelect?o:-1),o===i&&r!==this.completions.filtered[o]&&this.$onPopupChange();var a=this.inlineRenderer&&this.inlineEnabled;if(o===i&&a){var c=this.popup.getData(this.popup.getRow());this.$updateGhostText(c)}n||(this.popup.setTheme(e.getTheme()),this.popup.setFontSize(e.getFontSize()),this.$updatePopupPosition(),this.tooltipNode&&this.updateDocTooltip()),this.changeTimer.cancel(),this.observeLayoutChanges()},e.prototype.detach=function(){this.editor&&(this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener)),this.$firstOpenTimer.cancel(),this.changeTimer.cancel(),this.hideDocTooltip(),this.completionProvider&&this.completionProvider.detach(),this.popup&&this.popup.isOpen&&this.popup.hide(),this.popup&&this.popup.renderer&&this.popup.renderer.off("afterRender",this.$onPopupRender),this.base&&this.base.detach(),this.activated=!1,this.completionProvider=this.completions=this.base=null,this.unObserveLayoutChanges()},e.prototype.changeListener=function(e){var t=this.editor.selection.lead;(t.row!=this.base.row||t.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},e.prototype.blurListener=function(e){var t=document.activeElement,n=this.editor.textInput.getElement(),o=e.relatedTarget&&this.tooltipNode&&this.tooltipNode.contains(e.relatedTarget),i=this.popup&&this.popup.container;t!=n&&t.parentNode!=i&&!o&&t!=this.tooltipNode&&e.relatedTarget!=n&&this.detach()},e.prototype.mousedownListener=function(e){this.detach()},e.prototype.mousewheelListener=function(e){this.popup&&!this.popup.isMouseOver&&this.detach()},e.prototype.mouseOutListener=function(e){this.popup.isOpen&&this.$updatePopupPosition()},e.prototype.goTo=function(e){this.popup.goTo(e)},e.prototype.insertMatch=function(e,t){if(e||(e=this.popup.getData(this.popup.getRow())),!e)return!1;if(""===e.value)return this.detach();var n=this.completions,o=this.getCompletionProvider().insertMatch(this.editor,e,n.filterText,t);return this.completions==n&&this.detach(),o},e.prototype.showPopup=function(e,t){this.editor&&this.detach(),this.activated=!0,this.editor=e,e.completer!=this&&(e.completer&&e.completer.detach(),e.completer=this),e.on("changeSelection",this.changeListener),e.on("blur",this.blurListener),e.on("mousedown",this.mousedownListener),e.on("mousewheel",this.mousewheelListener),this.updateCompletions(!1,t)},e.prototype.getCompletionProvider=function(e){return this.completionProvider||(this.completionProvider=new g(e)),this.completionProvider},e.prototype.gatherCompletions=function(e,t){return this.getCompletionProvider().gatherCompletions(e,t)},e.prototype.updateCompletions=function(t,n){if(t&&this.base&&this.completions){var o=this.editor.getCursorPosition(),i=this.editor.session.getTextRange({start:this.base,end:o});if(i==this.completions.filterText)return;return this.completions.setFilter(i),this.completions.filtered.length?1!=this.completions.filtered.length||this.completions.filtered[0].value!=i||this.completions.filtered[0].snippet?void this.openPopup(this.editor,i,t):this.detach():this.detach()}if(n&&n.matches){o=this.editor.getSelectionRange().start;return this.base=this.editor.session.doc.createAnchor(o.row,o.column),this.base.$insertRight=!0,this.completions=new v(n.matches),this.getCompletionProvider().completions=this.completions,this.openPopup(this.editor,"",t)}var r=this.editor.getSession();o=this.editor.getCursorPosition(),i=a.getCompletionPrefix(this.editor);this.base=r.doc.createAnchor(o.row,o.column-i.length),this.base.$insertRight=!0;var s={exactMatch:this.exactMatch,ignoreCaption:this.ignoreCaption};this.getCompletionProvider({prefix:i,pos:o}).provideCompletions(this.editor,s,function(n,o,i){var r=o.filtered,s=a.getCompletionPrefix(this.editor);if(this.$firstOpenTimer.cancel(),i){if(!r.length){var c=!this.autoShown&&this.emptyMessage;if("function"==typeof c&&(c=this.emptyMessage(s)),c){var l=[{caption:c,value:""}];return this.completions=new v(l),this.openPopup(this.editor,s,t),this.popup.renderer.setStyle("ace_loading",!1),void this.popup.renderer.setStyle("ace_empty-message",!0)}return this.detach()}if(1==r.length&&r[0].value==s&&!r[0].snippet)return this.detach();if(this.autoInsert&&!this.autoShown&&1==r.length)return this.insertMatch(r[0])}this.completions=!i&&this.showLoadingState?new v(e.completionsForLoading.concat(r),o.filterText):o,this.openPopup(this.editor,s,t),this.popup.renderer.setStyle("ace_empty-message",!1),this.popup.renderer.setStyle("ace_loading",!i)}.bind(this)),this.showLoadingState&&!this.autoShown&&(!this.popup||!this.popup.isOpen)&&this.$firstOpenTimer.delay(this.stickySelectionDelay/2)},e.prototype.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},e.prototype.updateDocTooltip=function(){var e=this.popup,t=this.completions.filtered,n=t&&(t[e.getHoveredRow()]||t[e.getRow()]),o=null;if(!n||!this.editor||!this.popup.isOpen)return this.hideDocTooltip();for(var i=this.editor.completers.length,r=0;r<i;r++){var s=this.editor.completers[r];if(s.getDocTooltip&&n.completerId===s.id){o=s.getDocTooltip(n);break}}if(!o&&"string"!=typeof n&&(o=n),"string"==typeof o&&(o={docText:o}),!o||!o.docHTML&&!o.docText)return this.hideDocTooltip();this.showDocTooltip(o)},e.prototype.showDocTooltip=function(e){this.tooltipNode||(this.tooltipNode=l.createElement("div"),this.tooltipNode.style.margin="0",this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.style.overscrollBehavior="contain",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this),this.tooltipNode.onclick=this.onTooltipClick.bind(this),this.tooltipNode.id="doc-tooltip",this.tooltipNode.setAttribute("role","tooltip"),this.tooltipNode.addEventListener("wheel",d));var t=this.editor.renderer.theme;this.tooltipNode.className="ace_tooltip ace_doc-tooltip "+(t.isDark?"ace_dark ":"")+(t.cssClass||"");var n=this.tooltipNode;e.docHTML?n.innerHTML=e.docHTML:e.docText&&(n.textContent=e.docText),n.parentNode||this.popup.container.appendChild(this.tooltipNode);var o=this.popup,i=o.container.getBoundingClientRect();n.style.top=o.container.style.top,n.style.bottom=o.container.style.bottom,n.style.display="block",window.innerWidth-i.right<320?i.left<320?o.isTopdown?(n.style.top=i.bottom+"px",n.style.left=i.left+"px",n.style.right="",n.style.bottom=""):(n.style.top=o.container.offsetTop-n.offsetHeight+"px",n.style.left=i.left+"px",n.style.right="",n.style.bottom=""):(n.style.right=window.innerWidth-i.left+"px",n.style.left=""):(n.style.left=i.right+1+"px",n.style.right="")},e.prototype.hideDocTooltip=function(){if(this.tooltipTimer.cancel(),this.tooltipNode){var e=this.tooltipNode;!this.editor.isFocused()&&document.activeElement==e&&this.editor.focus(),this.tooltipNode=null,e.parentNode&&e.parentNode.removeChild(e)}},e.prototype.onTooltipClick=function(e){var t=e.target;while(t&&t!=this.tooltipNode){if("A"==t.nodeName&&t.href){t.rel="noreferrer",t.target="_blank";break}t=t.parentNode}},e.prototype.destroy=function(){if(this.detach(),this.popup){this.popup.destroy();var e=this.popup.container;e&&e.parentNode&&e.parentNode.removeChild(e)}this.editor&&this.editor.completer==this&&(this.editor.off("destroy",m),this.editor.completer=null),this.inlineRenderer=this.popup=this.editor=null},e}();f.prototype.commands={Up:function(e){e.completer.goTo("up")},Down:function(e){e.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(e){e.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(e){e.completer.goTo("end")},Esc:function(e){e.completer.detach()},Return:function(e){return e.completer.insertMatch()},"Shift-Return":function(e){e.completer.insertMatch(null,{deleteSuffix:!0})},Tab:function(e){var t=e.completer.insertMatch();if(t||e.tabstopManager)return t;e.completer.goTo("down")},Backspace:function(e){e.execCommand("backspace");var t=a.getCompletionPrefix(e);!t&&e.completer&&e.completer.detach()},PageUp:function(e){e.completer.popup.gotoPageUp()},PageDown:function(e){e.completer.popup.gotoPageDown()}},f.for=function(e){return e.completer instanceof f||(e.completer&&(e.completer.destroy(),e.completer=null),p.get("sharedPopups")?(f.$sharedInstance||(f.$sharedInstance=new f),e.completer=f.$sharedInstance):(e.completer=new f,e.once("destroy",m))),e.completer},f.startCommand={name:"startAutocomplete",exec:function(e,t){var n=f.for(e);n.autoInsert=!1,n.autoSelect=!0,n.autoShown=!1,n.showPopup(e,t),n.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var g=function(){function e(e){this.initialPosition=e,this.active=!0}return e.prototype.insertByIndex=function(e,t,n){return!(!this.completions||!this.completions.filtered)&&this.insertMatch(e,this.completions.filtered[t],n)},e.prototype.insertMatch=function(e,t,n){if(!t)return!1;if(e.startOperation({command:{name:"insertMatch"}}),t.completer&&t.completer.insertMatch)t.completer.insertMatch(e,t);else{if(!this.completions)return!1;var o=this.completions.filterText.length,i=0;if(t.range&&t.range.start.row===t.range.end.row&&(o-=this.initialPosition.prefix.length,o+=this.initialPosition.pos.column-t.range.start.column,i+=t.range.end.column-this.initialPosition.pos.column),o||i){var r;r=e.selection.getAllRanges?e.selection.getAllRanges():[e.getSelectionRange()];for(var s,a=0;s=r[a];a++)s.start.column-=o,s.end.column+=i,e.session.remove(s)}t.snippet?h.insertSnippet(e,t.snippet):this.$insertString(e,t),t.completer&&t.completer.onInsert&&"function"==typeof t.completer.onInsert&&t.completer.onInsert(e,t),t.command&&"startAutocomplete"===t.command&&e.execCommand(t.command)}return e.endOperation(),!0},e.prototype.$insertString=function(e,t){var n=t.value||t;e.execCommand("insertstring",n)},e.prototype.gatherCompletions=function(e,t){var n=e.getSession(),o=e.getCursorPosition(),i=a.getCompletionPrefix(e),r=[];this.completers=e.completers;var s=e.completers.length;return e.completers.forEach((function(c,l){c.getCompletions(e,n,o,i,(function(n,o){c.hideInlinePreview&&(o=o.map((function(e){return Object.assign(e,{hideInlinePreview:c.hideInlinePreview})}))),!n&&o&&(r=r.concat(o)),t(null,{prefix:a.getCompletionPrefix(e),matches:r,finished:0===--s})}))})),!0},e.prototype.provideCompletions=function(e,t,n){var o=function(e){var o=e.prefix,i=e.matches;this.completions=new v(i),t.exactMatch&&(this.completions.exactMatch=!0),t.ignoreCaption&&(this.completions.ignoreCaption=!0),this.completions.setFilter(o),(e.finished||this.completions.filtered.length)&&n(null,this.completions,e.finished)}.bind(this),i=!0,r=null;if(this.gatherCompletions(e,function(e,t){if(this.active){e&&(n(e,[],!0),this.detach());var s=t.prefix;0===s.indexOf(t.prefix)&&(i?r=t:o(t))}}.bind(this)),i=!1,r){var s=r;r=null,o(s)}},e.prototype.detach=function(){this.active=!1,this.completers&&this.completers.forEach((function(e){"function"==typeof e.cancel&&e.cancel()}))},e}(),v=function(){function e(e,t){this.all=e,this.filtered=e,this.filterText=t||"",this.exactMatch=!1,this.ignoreCaption=!1}return e.prototype.setFilter=function(e){if(e.length>this.filterText&&0===e.lastIndexOf(this.filterText,0))var t=this.filtered;else t=this.all;this.filterText=e,t=this.filterCompletions(t,this.filterText),t=t.sort((function(e,t){return t.exactMatch-e.exactMatch||t.$score-e.$score||(e.caption||e.value).localeCompare(t.caption||t.value)}));var n=null;t=t.filter((function(e){var t=e.snippet||e.caption||e.value;return t!==n&&(n=t,!0)})),this.filtered=t},e.prototype.filterCompletions=function(e,t){var n=[],o=t.toUpperCase(),i=t.toLowerCase();e:for(var r,s=0;r=e[s];s++){var a=!this.ignoreCaption&&r.caption||r.value||r.snippet;if(a){var c,l,h=-1,p=0,u=0;if(this.exactMatch){if(t!==a.substr(0,t.length))continue e}else{var d=a.toLowerCase().indexOf(i);if(d>-1)u=d;else for(var m=0;m<t.length;m++){var f=a.indexOf(i[m],h+1),g=a.indexOf(o[m],h+1);if(c=f>=0&&(g<0||f<g)?f:g,c<0)continue e;l=c-h-1,l>0&&(-1===h&&(u+=10),u+=l,p|=1<<m),h=c}}r.matchMask=p,r.exactMatch=u?0:1,r.$score=(r.score||0)-u,n.push(r)}}return n},e}();t.Autocomplete=f,t.CompletionProvider=g,t.FilteredList=v})),ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],(function(e,t,n){function o(e,t){var n=e.getTextRange(r.fromPoints({row:0,column:0},t));return n.split(s).length-1}function i(e,t){var n=o(e,t),i=e.getValue().split(s),r=Object.create(null),a=i[n];return i.forEach((function(e,t){if(e&&e!==a){var o=Math.abs(n-t),s=i.length-o;r[e]?r[e]=Math.max(s,r[e]):r[e]=s}})),r}var r=e("../range").Range,s=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;t.getCompletions=function(e,t,n,o,r){var s=i(t,n),a=Object.keys(s);r(null,a.map((function(e){return{caption:e,value:e,score:s[e],meta:"local"}})))}})),ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],(function(e,t,n){"use strict";var o=e("../snippets").snippetManager,i=e("../autocomplete").Autocomplete,r=e("../config"),s=e("../lib/lang"),a=e("../autocomplete/util"),c=e("../autocomplete/text_completer"),l={getCompletions:function(e,t,n,o,i){if(t.$mode.completer)return t.$mode.completer.getCompletions(e,t,n,o,i);var r=e.session.getState(n.row),s=t.$mode.getCompletions(r,t,n,o);s=s.map((function(e){return e.completerId=l.id,e})),i(null,s)},id:"keywordCompleter"},h=function(e){var t={};return e.replace(/\${(\d+)(:(.*?))?}/g,(function(e,n,o,i){return t[n]=i||""})).replace(/\$(\d+?)/g,(function(e,n){return t[n]}))},p={getCompletions:function(e,t,n,i,r){var s=[],a=t.getTokenAt(n.row,n.column);a&&a.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\.xml$/)?s.push("html-tag"):s=o.getActiveScopes(e);var c=o.snippetMap,l=[];s.forEach((function(e){for(var t=c[e]||[],n=t.length;n--;){var o=t[n],i=o.name||o.tabTrigger;i&&l.push({caption:i,snippet:o.content,meta:o.tabTrigger&&!o.name?o.tabTrigger+"⇥ ":"snippet",completerId:p.id})}}),this),r(null,l)},getDocTooltip:function(e){e.snippet&&!e.docHTML&&(e.docHTML=["<b>",s.escapeHTML(e.caption),"</b>","<hr></hr>",s.escapeHTML(h(e.snippet))].join(""))},id:"snippetCompleter"},u=[p,c,l];t.setCompleters=function(e){u.length=0,e&&u.push.apply(u,e)},t.addCompleter=function(e){u.push(e)},t.textCompleter=c,t.keyWordCompleter=l,t.snippetCompleter=p;var d,m={name:"expandSnippet",exec:function(e){return o.expandWithTab(e)},bindKey:"Tab"},f=function(e,t){g(t.session.$mode)},g=function(e){"string"==typeof e&&(e=r.$modes[e]),e&&(o.files||(o.files={}),v(e.$id,e.snippetFileId),e.modes&&e.modes.forEach(g))},v=function(e,t){t&&e&&!o.files[e]&&(o.files[e]={},r.loadModule(t,(function(t){t&&(o.files[e]=t,!t.snippets&&t.snippetText&&(t.snippets=o.parseSnippetFile(t.snippetText)),o.register(t.snippets||[],t.scope),t.includeScopes&&(o.snippetMap[t.scope].includeScopes=t.includeScopes,t.includeScopes.forEach((function(e){g("ace/mode/"+e)}))))})))},b=function(e){var t=e.editor,n=t.completer&&t.completer.activated;if("backspace"===e.command.name)n&&!a.getCompletionPrefix(t)&&t.completer.detach();else if("insertstring"===e.command.name&&!n){d=e;var o=e.editor.$liveAutocompletionDelay;o?y.delay(o):x(e)}},y=s.delayedCall((function(){x(d)}),0),x=function(e){var t=e.editor,n=a.getCompletionPrefix(t),o=e.args,r=a.triggerAutocomplete(t,o);if(n&&n.length>=t.$liveAutocompletionThreshold||r){var s=i.for(t);s.autoShown=!0,s.showPopup(t)}},w=e("../editor").Editor;e("../config").defineOptions(w.prototype,"editor",{enableBasicAutocompletion:{set:function(e){e?(this.completers||(this.completers=Array.isArray(e)?e:u),this.commands.addCommand(i.startCommand)):this.commands.removeCommand(i.startCommand)},value:!1},enableLiveAutocompletion:{set:function(e){e?(this.completers||(this.completers=Array.isArray(e)?e:u),this.commands.on("afterExec",b)):this.commands.off("afterExec",b)},value:!1},liveAutocompletionDelay:{initialValue:0},liveAutocompletionThreshold:{initialValue:0},enableSnippets:{set:function(e){e?(this.commands.addCommand(m),this.on("changeMode",f),f(null,this)):(this.commands.removeCommand(m),this.off("changeMode",f))},value:!1}})})),function(){ace.require(["ace/ext/language_tools"],(function(t){e&&(e.exports=t)}))}()},639:function(e,t,n){e=n.nmd(e),ace.define("ace/ext/searchbox-css",["require","exports","module"],(function(e,t,n){n.exports='\n\n/* ------------------------------------------------------------------------------------------\n * Editor Search Form\n * --------------------------------------------------------------------------------------- */\n.ace_search {\n    background-color: #ddd;\n    color: #666;\n    border: 1px solid #cbcbcb;\n    border-top: 0 none;\n    overflow: hidden;\n    margin: 0;\n    padding: 4px 6px 0 4px;\n    position: absolute;\n    top: 0;\n    z-index: 99;\n    white-space: normal;\n}\n.ace_search.left {\n    border-left: 0 none;\n    border-radius: 0px 0px 5px 0px;\n    left: 0;\n}\n.ace_search.right {\n    border-radius: 0px 0px 0px 5px;\n    border-right: 0 none;\n    right: 0;\n}\n\n.ace_search_form, .ace_replace_form {\n    margin: 0 20px 4px 0;\n    overflow: hidden;\n    line-height: 1.9;\n}\n.ace_replace_form {\n    margin-right: 0;\n}\n.ace_search_form.ace_nomatch {\n    outline: 1px solid red;\n}\n\n.ace_search_field {\n    border-radius: 3px 0 0 3px;\n    background-color: white;\n    color: black;\n    border: 1px solid #cbcbcb;\n    border-right: 0 none;\n    outline: 0;\n    padding: 0;\n    font-size: inherit;\n    margin: 0;\n    line-height: inherit;\n    padding: 0 6px;\n    min-width: 17em;\n    vertical-align: top;\n    min-height: 1.8em;\n    box-sizing: content-box;\n}\n.ace_searchbtn {\n    border: 1px solid #cbcbcb;\n    line-height: inherit;\n    display: inline-block;\n    padding: 0 6px;\n    background: #fff;\n    border-right: 0 none;\n    border-left: 1px solid #dcdcdc;\n    cursor: pointer;\n    margin: 0;\n    position: relative;\n    color: #666;\n}\n.ace_searchbtn:last-child {\n    border-radius: 0 3px 3px 0;\n    border-right: 1px solid #cbcbcb;\n}\n.ace_searchbtn:disabled {\n    background: none;\n    cursor: default;\n}\n.ace_searchbtn:hover {\n    background-color: #eef1f6;\n}\n.ace_searchbtn.prev, .ace_searchbtn.next {\n     padding: 0px 0.7em\n}\n.ace_searchbtn.prev:after, .ace_searchbtn.next:after {\n     content: "";\n     border: solid 2px #888;\n     width: 0.5em;\n     height: 0.5em;\n     border-width:  2px 0 0 2px;\n     display:inline-block;\n     transform: rotate(-45deg);\n}\n.ace_searchbtn.next:after {\n     border-width: 0 2px 2px 0 ;\n}\n.ace_searchbtn_close {\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAAZ0lEQVR42u2SUQrAMAhDvazn8OjZBilCkYVVxiis8H4CT0VrAJb4WHT3C5xU2a2IQZXJjiQIRMdkEoJ5Q2yMqpfDIo+XY4k6h+YXOyKqTIj5REaxloNAd0xiKmAtsTHqW8sR2W5f7gCu5nWFUpVjZwAAAABJRU5ErkJggg==) no-repeat 50% 0;\n    border-radius: 50%;\n    border: 0 none;\n    color: #656565;\n    cursor: pointer;\n    font: 16px/16px Arial;\n    padding: 0;\n    height: 14px;\n    width: 14px;\n    top: 9px;\n    right: 7px;\n    position: absolute;\n}\n.ace_searchbtn_close:hover {\n    background-color: #656565;\n    background-position: 50% 100%;\n    color: white;\n}\n\n.ace_button {\n    margin-left: 2px;\n    cursor: pointer;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -o-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    overflow: hidden;\n    opacity: 0.7;\n    border: 1px solid rgba(100,100,100,0.23);\n    padding: 1px;\n    box-sizing:    border-box!important;\n    color: black;\n}\n\n.ace_button:hover {\n    background-color: #eee;\n    opacity:1;\n}\n.ace_button:active {\n    background-color: #ddd;\n}\n\n.ace_button.checked {\n    border-color: #3399ff;\n    opacity:1;\n}\n\n.ace_search_options{\n    margin-bottom: 3px;\n    text-align: right;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -o-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    clear: both;\n}\n\n.ace_search_counter {\n    float: left;\n    font-family: arial;\n    padding: 0 8px;\n}'})),ace.define("ace/ext/searchbox",["require","exports","module","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/ext/searchbox-css","ace/keyboard/hash_handler","ace/lib/keys","ace/config"],(function(e,t,n){"use strict";var o=e("../lib/dom"),i=e("../lib/lang"),r=e("../lib/event"),s=e("./searchbox-css"),a=e("../keyboard/hash_handler").HashHandler,c=e("../lib/keys"),l=e("../config").nls,h=999;o.importCssString(s,"ace_searchbox",!1);var p=function(){function e(e,t,n){this.activeInput;var i=o.createElement("div");o.buildDom(["div",{class:"ace_search right"},["span",{action:"hide",class:"ace_searchbtn_close"}],["div",{class:"ace_search_form"},["input",{class:"ace_search_field",placeholder:l("search-box.find.placeholder","Search for"),spellcheck:"false"}],["span",{action:"findPrev",class:"ace_searchbtn prev"},"​"],["span",{action:"findNext",class:"ace_searchbtn next"},"​"],["span",{action:"findAll",class:"ace_searchbtn",title:"Alt-Enter"},l("search-box.find-all.text","All")]],["div",{class:"ace_replace_form"},["input",{class:"ace_search_field",placeholder:l("search-box.replace.placeholder","Replace with"),spellcheck:"false"}],["span",{action:"replaceAndFindNext",class:"ace_searchbtn"},l("search-box.replace-next.text","Replace")],["span",{action:"replaceAll",class:"ace_searchbtn"},l("search-box.replace-all.text","All")]],["div",{class:"ace_search_options"},["span",{action:"toggleReplace",class:"ace_button",title:l("search-box.toggle-replace.title","Toggle Replace mode"),style:"float:left;margin-top:-2px;padding:0 5px;"},"+"],["span",{class:"ace_search_counter"}],["span",{action:"toggleRegexpMode",class:"ace_button",title:l("search-box.toggle-regexp.title","RegExp Search")},".*"],["span",{action:"toggleCaseSensitive",class:"ace_button",title:l("search-box.toggle-case.title","CaseSensitive Search")},"Aa"],["span",{action:"toggleWholeWords",class:"ace_button",title:l("search-box.toggle-whole-word.title","Whole Word Search")},"\\b"],["span",{action:"searchInSelection",class:"ace_button",title:l("search-box.toggle-in-selection.title","Search In Selection")},"S"]]],i),this.element=i.firstChild,this.setSession=this.setSession.bind(this),this.$init(),this.setEditor(e),o.importCssString(s,"ace_searchbox",e.container)}return e.prototype.setEditor=function(e){e.searchBox=this,e.renderer.scroller.appendChild(this.element),this.editor=e},e.prototype.setSession=function(e){this.searchRange=null,this.$syncOptions(!0)},e.prototype.$initElements=function(e){this.searchBox=e.querySelector(".ace_search_form"),this.replaceBox=e.querySelector(".ace_replace_form"),this.searchOption=e.querySelector("[action=searchInSelection]"),this.replaceOption=e.querySelector("[action=toggleReplace]"),this.regExpOption=e.querySelector("[action=toggleRegexpMode]"),this.caseSensitiveOption=e.querySelector("[action=toggleCaseSensitive]"),this.wholeWordOption=e.querySelector("[action=toggleWholeWords]"),this.searchInput=this.searchBox.querySelector(".ace_search_field"),this.replaceInput=this.replaceBox.querySelector(".ace_search_field"),this.searchCounter=e.querySelector(".ace_search_counter")},e.prototype.$init=function(){var e=this.element;this.$initElements(e);var t=this;r.addListener(e,"mousedown",(function(e){setTimeout((function(){t.activeInput.focus()}),0),r.stopPropagation(e)})),r.addListener(e,"click",(function(e){var n=e.target||e.srcElement,o=n.getAttribute("action");o&&t[o]?t[o]():t.$searchBarKb.commands[o]&&t.$searchBarKb.commands[o].exec(t),r.stopPropagation(e)})),r.addCommandKeyListener(e,(function(e,n,o){var i=c.keyCodeToString(o),s=t.$searchBarKb.findKeyCommand(n,i);s&&s.exec&&(s.exec(t),r.stopEvent(e))})),this.$onChange=i.delayedCall((function(){t.find(!1,!1)})),r.addListener(this.searchInput,"input",(function(){t.$onChange.schedule(20)})),r.addListener(this.searchInput,"focus",(function(){t.activeInput=t.searchInput,t.searchInput.value&&t.highlight()})),r.addListener(this.replaceInput,"focus",(function(){t.activeInput=t.replaceInput,t.searchInput.value&&t.highlight()}))},e.prototype.setSearchRange=function(e){this.searchRange=e,e?this.searchRangeMarker=this.editor.session.addMarker(e,"ace_active-line"):this.searchRangeMarker&&(this.editor.session.removeMarker(this.searchRangeMarker),this.searchRangeMarker=null)},e.prototype.$syncOptions=function(e){o.setCssClass(this.replaceOption,"checked",this.searchRange),o.setCssClass(this.searchOption,"checked",this.searchOption.checked),this.replaceOption.textContent=this.replaceOption.checked?"-":"+",o.setCssClass(this.regExpOption,"checked",this.regExpOption.checked),o.setCssClass(this.wholeWordOption,"checked",this.wholeWordOption.checked),o.setCssClass(this.caseSensitiveOption,"checked",this.caseSensitiveOption.checked);var t=this.editor.getReadOnly();this.replaceOption.style.display=t?"none":"",this.replaceBox.style.display=this.replaceOption.checked&&!t?"":"none",this.find(!1,!1,e)},e.prototype.highlight=function(e){this.editor.session.highlight(e||this.editor.$search.$options.re),this.editor.renderer.updateBackMarkers()},e.prototype.find=function(e,t,n){var i=this.editor.find(this.searchInput.value,{skipCurrent:e,backwards:t,wrap:!0,regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked,preventScroll:n,range:this.searchRange}),r=!i&&this.searchInput.value;o.setCssClass(this.searchBox,"ace_nomatch",r),this.editor._emit("findSearchBox",{match:!r}),this.highlight(),this.updateCounter()},e.prototype.updateCounter=function(){var e=this.editor,t=e.$search.$options.re,n=t.unicode,o=0,r=0;if(t){var s=this.searchRange?e.session.getTextRange(this.searchRange):e.getValue(),a=e.session.doc.positionToIndex(e.selection.anchor);this.searchRange&&(a-=e.session.doc.positionToIndex(this.searchRange.start));var c,p=t.lastIndex=0;while(c=t.exec(s)){if(o++,p=c.index,p<=a&&r++,o>h)break;if(!c[0]&&(t.lastIndex=p+=i.skipEmptyMatch(s,p,n),p>=s.length))break}}this.searchCounter.textContent=l("search-box.search-counter","$0 of $1",[r,o>h?h+"+":o])},e.prototype.findNext=function(){this.find(!0,!1)},e.prototype.findPrev=function(){this.find(!0,!0)},e.prototype.findAll=function(){var e=this.editor.findAll(this.searchInput.value,{regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked}),t=!e&&this.searchInput.value;o.setCssClass(this.searchBox,"ace_nomatch",t),this.editor._emit("findSearchBox",{match:!t}),this.highlight(),this.hide()},e.prototype.replace=function(){this.editor.getReadOnly()||this.editor.replace(this.replaceInput.value)},e.prototype.replaceAndFindNext=function(){this.editor.getReadOnly()||(this.editor.replace(this.replaceInput.value),this.findNext())},e.prototype.replaceAll=function(){this.editor.getReadOnly()||this.editor.replaceAll(this.replaceInput.value)},e.prototype.hide=function(){this.active=!1,this.setSearchRange(null),this.editor.off("changeSession",this.setSession),this.element.style.display="none",this.editor.keyBinding.removeKeyboardHandler(this.$closeSearchBarKb),this.editor.focus()},e.prototype.show=function(e,t){this.active=!0,this.editor.on("changeSession",this.setSession),this.element.style.display="",this.replaceOption.checked=t,e&&(this.searchInput.value=e),this.searchInput.focus(),this.searchInput.select(),this.editor.keyBinding.addKeyboardHandler(this.$closeSearchBarKb),this.$syncOptions(!0)},e.prototype.isFocused=function(){var e=document.activeElement;return e==this.searchInput||e==this.replaceInput},e}(),u=new a;u.bindKeys({"Ctrl-f|Command-f":function(e){var t=e.isReplace=!e.isReplace;e.replaceBox.style.display=t?"":"none",e.replaceOption.checked=!1,e.$syncOptions(),e.searchInput.focus()},"Ctrl-H|Command-Option-F":function(e){e.editor.getReadOnly()||(e.replaceOption.checked=!0,e.$syncOptions(),e.replaceInput.focus())},"Ctrl-G|Command-G":function(e){e.findNext()},"Ctrl-Shift-G|Command-Shift-G":function(e){e.findPrev()},esc:function(e){setTimeout((function(){e.hide()}))},Return:function(e){e.activeInput==e.replaceInput&&e.replace(),e.findNext()},"Shift-Return":function(e){e.activeInput==e.replaceInput&&e.replace(),e.findPrev()},"Alt-Return":function(e){e.activeInput==e.replaceInput&&e.replaceAll(),e.findAll()},Tab:function(e){(e.activeInput==e.replaceInput?e.searchInput:e.replaceInput).focus()}}),u.addCommands([{name:"toggleRegexpMode",bindKey:{win:"Alt-R|Alt-/",mac:"Ctrl-Alt-R|Ctrl-Alt-/"},exec:function(e){e.regExpOption.checked=!e.regExpOption.checked,e.$syncOptions()}},{name:"toggleCaseSensitive",bindKey:{win:"Alt-C|Alt-I",mac:"Ctrl-Alt-R|Ctrl-Alt-I"},exec:function(e){e.caseSensitiveOption.checked=!e.caseSensitiveOption.checked,e.$syncOptions()}},{name:"toggleWholeWords",bindKey:{win:"Alt-B|Alt-W",mac:"Ctrl-Alt-B|Ctrl-Alt-W"},exec:function(e){e.wholeWordOption.checked=!e.wholeWordOption.checked,e.$syncOptions()}},{name:"toggleReplace",exec:function(e){e.replaceOption.checked=!e.replaceOption.checked,e.$syncOptions()}},{name:"searchInSelection",exec:function(e){e.searchOption.checked=!e.searchRange,e.setSearchRange(e.searchOption.checked&&e.editor.getSelectionRange()),e.$syncOptions()}}]);var d=new a([{bindKey:"Esc",name:"closeSearchBar",exec:function(e){e.searchBox.hide()}}]);p.prototype.$searchBarKb=u,p.prototype.$closeSearchBarKb=d,t.SearchBox=p,t.Search=function(e,t){var n=e.searchBox||new p(e);n.show(e.session.getTextRange(),t)}})),function(){ace.require(["ace/ext/searchbox"],(function(t){e&&(e.exports=t)}))}()},9855:function(e,t,n){e=n.nmd(e),ace.define("ace/theme/one_dark-css",["require","exports","module"],(function(e,t,n){n.exports=".ace-one-dark .ace_gutter {\n    background: #282c34;\n    color: #6a6f7a\n}\n\n.ace-one-dark .ace_print-margin {\n    width: 1px;\n    background: #e8e8e8\n}\n\n.ace-one-dark {\n    background-color: #282c34;\n    color: #abb2bf\n}\n\n.ace-one-dark .ace_cursor {\n    color: #528bff\n}\n\n.ace-one-dark .ace_marker-layer .ace_selection {\n    background: #3d4350\n}\n\n.ace-one-dark.ace_multiselect .ace_selection.ace_start {\n    box-shadow: 0 0 3px 0 #282c34;\n    border-radius: 2px\n}\n\n.ace-one-dark .ace_marker-layer .ace_step {\n    background: #c6dbae\n}\n\n.ace-one-dark .ace_marker-layer .ace_bracket {\n    margin: -1px 0 0 -1px;\n    border: 1px solid #747369\n}\n\n.ace-one-dark .ace_marker-layer .ace_active-line {\n    background: rgba(76, 87, 103, .19)\n}\n\n.ace-one-dark .ace_gutter-active-line {\n    background-color: rgba(76, 87, 103, .19)\n}\n\n.ace-one-dark .ace_marker-layer .ace_selected-word {\n    border: 1px solid #3d4350\n}\n\n.ace-one-dark .ace_fold {\n    background-color: #61afef;\n    border-color: #abb2bf\n}\n\n.ace-one-dark .ace_keyword {\n    color: #c678dd\n}\n\n.ace-one-dark .ace_keyword.ace_operator {\n    color: #c678dd\n}\n\n.ace-one-dark .ace_keyword.ace_other.ace_unit {\n    color: #d19a66\n}\n\n.ace-one-dark .ace_constant.ace_language {\n    color: #d19a66\n}\n\n.ace-one-dark .ace_constant.ace_numeric {\n    color: #d19a66\n}\n\n.ace-one-dark .ace_constant.ace_character {\n    color: #56b6c2\n}\n\n.ace-one-dark .ace_constant.ace_other {\n    color: #56b6c2\n}\n\n.ace-one-dark .ace_support.ace_function {\n    color: #61afef\n}\n\n.ace-one-dark .ace_support.ace_constant {\n    color: #d19a66\n}\n\n.ace-one-dark .ace_support.ace_class {\n    color: #e5c07b\n}\n\n.ace-one-dark .ace_support.ace_type {\n    color: #e5c07b\n}\n\n.ace-one-dark .ace_storage {\n    color: #c678dd\n}\n\n.ace-one-dark .ace_storage.ace_type {\n    color: #c678dd\n}\n\n.ace-one-dark .ace_invalid {\n    color: #fff;\n    background-color: #f2777a\n}\n\n.ace-one-dark .ace_invalid.ace_deprecated {\n    color: #272b33;\n    background-color: #d27b53\n}\n\n.ace-one-dark .ace_string {\n    color: #98c379\n}\n\n.ace-one-dark .ace_string.ace_regexp {\n    color: #e06c75\n}\n\n.ace-one-dark .ace_comment {\n    font-style: italic;\n    color: #5c6370\n}\n\n.ace-one-dark .ace_variable {\n    color: #e06c75\n}\n\n.ace-one-dark .ace_variable.ace_parameter {\n    color: #d19a66\n}\n\n.ace-one-dark .ace_meta.ace_tag {\n    color: #e06c75\n}\n\n.ace-one-dark .ace_entity.ace_other.ace_attribute-name {\n    color: #e06c75\n}\n\n.ace-one-dark .ace_entity.ace_name.ace_function {\n    color: #61afef\n}\n\n.ace-one-dark .ace_entity.ace_name.ace_tag {\n    color: #e06c75\n}\n\n.ace-one-dark .ace_markup.ace_heading {\n    color: #98c379\n}\n\n.ace-one-dark .ace_indent-guide {\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ09NrYAgMjP4PAAtGAwchHMyAAAAAAElFTkSuQmCC) right repeat-y\n}\n\n.ace-one-dark .ace_indent-guide-active {\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQIW2PQ1dX9zzBz5sz/ABCcBFFentLlAAAAAElFTkSuQmCC) right repeat-y;\n}\n"})),ace.define("ace/theme/one_dark",["require","exports","module","ace/theme/one_dark-css","ace/lib/dom"],(function(e,t,n){t.isDark=!0,t.cssClass="ace-one-dark",t.cssText=e("./one_dark-css");var o=e("../lib/dom");o.importCssString(t.cssText,t.cssClass,!1)})),function(){ace.require(["ace/theme/one_dark"],(function(t){e&&(e.exports=t)}))}()},8164:function(e,t,n){"use strict";n.d(t,{M:function(){return A},W:function(){return w}});var o=n(7666),i=n(9459);const r=17,s=91,a=86,c=67,l=88,h=89,p=90,u=71,d=66,m=76,f=85,g=83,v=80,b=68,y=46,x=69,w=[66,67,68,69,71,76,80,83,85,86,88,89,90],S={[a]:E,[h]:L,[p]:R,[g]:D,[v]:N,[x]:P},C={...S,[f]:B},k={...S,[c]:$,[l]:T,[u]:M,[d]:O,[b]:I,[y]:I,[m]:H};let _=!1;function A(){window.onkeydown=e=>{if(!o.A.state.isInEdiotr)return;const{curComponent:t}=o.A.state,{keyCode:n}=e;n===r||n===s?_=!0:n==y&&t?(o.A.commit("deleteComponent"),o.A.commit("recordSnapshot")):_&&(!k[n]||t&&t.isLock?C[n]&&t&&t.isLock&&(e.preventDefault(),C[n]()):(e.preventDefault(),k[n]()))},window.onkeyup=e=>{e.keyCode!==r&&e.keyCode!==s||(_=!1)},window.onmousedown=()=>{o.A.commit("setInEditorStatus",!1)}}function $(){o.A.commit("copy")}function E(){o.A.commit("paste"),o.A.commit("recordSnapshot")}function T(){o.A.commit("cut")}function L(){o.A.commit("redo")}function R(){o.A.commit("undo")}function M(){o.A.state.areaData.components.length&&(o.A.commit("compose"),o.A.commit("recordSnapshot"))}function O(){const e=o.A.state.curComponent;e&&!e.isLock&&"Group"==e.component&&(o.A.commit("decompose"),o.A.commit("recordSnapshot"))}function D(){i.A.$emit("save")}function N(){i.A.$emit("preview")}function I(){o.A.state.curComponent&&(o.A.commit("deleteComponent"),o.A.commit("recordSnapshot"))}function P(){i.A.$emit("clearCanvas")}function H(){o.A.commit("lock")}function B(){o.A.commit("unlock")}},6955:function(e,t,n){"use strict";var o=n(2140),i=n(4901),r=n(2195),s=n(8227),a=s("toStringTag"),c=Object,l="Arguments"===r(function(){return arguments}()),h=function(e,t){try{return e[t]}catch(n){}};e.exports=o?r:function(e){var t,n,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=h(t=c(e),a))?n:l?r(t):"Object"===(o=r(t))&&i(t.callee)?"Arguments":o}},2106:function(e,t,n){"use strict";var o=n(283),i=n(7294);e.exports=function(e,t,n){return n.get&&o(n.get,t,{getter:!0}),n.set&&o(n.set,t,{setter:!0}),i.f(e,t,n)}},2140:function(e,t,n){"use strict";var o=n(8227),i=o("toStringTag"),r={};r[i]="z",e.exports="[object z]"===String(r)},655:function(e,t,n){"use strict";var o=n(6955),i=String;e.exports=function(e){if("Symbol"===o(e))throw new TypeError("Cannot convert a Symbol value to a string");return i(e)}},2812:function(e){"use strict";var t=TypeError;e.exports=function(e,n){if(e<n)throw new t("Not enough arguments");return e}},4603:function(e,t,n){"use strict";var o=n(6840),i=n(9504),r=n(655),s=n(2812),a=URLSearchParams,c=a.prototype,l=i(c.append),h=i(c["delete"]),p=i(c.forEach),u=i([].push),d=new a("a=1&a=2&b=3");d["delete"]("a",1),d["delete"]("b",void 0),d+""!=="a=2"&&o(c,"delete",(function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&void 0===n)return h(this,e);var o=[];p(this,(function(e,t){u(o,{key:t,value:e})})),s(t,1);var i,a=r(e),c=r(n),d=0,m=0,f=!1,g=o.length;while(d<g)i=o[d++],f||i.key===a?(f=!0,h(this,i.key)):m++;while(m<g)i=o[m++],i.key===a&&i.value===c||l(this,i.key,i.value)}),{enumerable:!0,unsafe:!0})},7566:function(e,t,n){"use strict";var o=n(6840),i=n(9504),r=n(655),s=n(2812),a=URLSearchParams,c=a.prototype,l=i(c.getAll),h=i(c.has),p=new a("a=1");!p.has("a",2)&&p.has("a",void 0)||o(c,"has",(function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&void 0===n)return h(this,e);var o=l(this,e);s(t,1);var i=r(n),a=0;while(a<o.length)if(o[a++]===i)return!0;return!1}),{enumerable:!0,unsafe:!0})},8721:function(e,t,n){"use strict";var o=n(3724),i=n(9504),r=n(2106),s=URLSearchParams.prototype,a=i(s.forEach);o&&!("size"in s)&&r(s,"size",{get:function(){var e=0;return a(this,(function(){e++})),e},configurable:!0,enumerable:!0})}}]);
//# sourceMappingURL=791.72887da5.js.map